(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{Dkpk:function(t,e,o){"use strict";o("d+bN")},XyhG:function(t,e,o){"use strict";o.r(e);var a=o("ta7f"),r=o("gR0X"),s=o("wd/R"),i=o.n(s),n=o("OmDE");function c(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,a)}return o}function l(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?c(Object(o),!0).forEach((function(e){u(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function u(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var d=new r.x,m=new r.j,_=new r.v,v=new r.l,p=new r.r,f=new r.w,b={directives:{mask:n.mask},data:function(){return{form:{id:null,empresa_id:"",parceiro_id:"",numero:"",data_emissao:"",documento_frete:"",custo_frete:"",custo_outros:"",observacoes_custo:"",valor_subtotal:0,valor_desconto:0,valor_acrescimo:0,valor_total:0,nota_itens:[],caixa_id:""},empresas:[],empresa:{},estoques:[],estoque:{},estoque_unico:!0,parceiros:[],parceiro:{},buscandoParceiros:!1,sucesso:null,erros:null,errosTitulo:"",timer:null,produtos:[],buscandoProdutos:!1,erroItemModal:null,sucessoItemModal:null,itemModal:{},preco:{decimal:",",thousands:".",prefix:this.$store.state.moeda+" ",suffix:"",precision:2,masked:!1},percentual:{decimal:",",thousands:".",prefix:"",suffix:" %",precision:2,masked:!1},desconto_percentual_mascara:{decimal:",",thousands:".",prefix:"",suffix:"",precision:1,masked:!1},desconto_valor_mascara:{decimal:",",thousands:".",prefix:"",suffix:"",precision:2,masked:!1},contas:[],buscandoContas:!1,timer_desconto:null,editando_desconto_valor:!1,editando_desconto_percentual:!1}},validations:function(){return{itemModal:{produto_codigo:{required:a.required},valor_unitario:{required:a.required,minValue:Object(a.minValue)(1e-4)},qtde:{required:a.required,minValue:Object(a.minValue)(1e-4)},valor_desconto:{required:a.required,minValue:Object(a.minValue)(0)},valor_acrescimo:{required:a.required,minValue:Object(a.minValue)(0)}},form:{empresa_id:{required:a.required},parceiro_id:{},documento_frete:{maxLength:Object(a.maxLength)(60)},custo_frete:{},custo_outros:{},observacoes_custo:{maxLength:Object(a.maxLength)(200)},valor_subtotal:{required:a.required,minValue:Object(a.minValue)(1e-4)},valor_desconto:{required:a.required,minValue:Object(a.minValue)(0)},valor_acrescimo:{required:a.required,minValue:Object(a.minValue)(0)},valor_total:{required:a.required,minValue:Object(a.minValue)(.001)},nota_itens:{required:a.required,$each:{produto_codigo:{required:a.required},valor_unitario:{required:a.required,minValue:Object(a.minValue)(1e-4)},qtde:{required:a.required,minValue:Object(a.minValue)(1e-4)},valor_desconto:{required:a.required,minValue:Object(a.minValue)(0)},valor_acrescimo:{required:a.required,minValue:Object(a.minValue)(0)},estoque_id:{required:a.required}}}}}},mounted:function(){var t=this;setTimeout((function(){t.buscarEmpresas()}),100),setTimeout((function(){t.buscarEstoques()}),200),setTimeout((function(){t.buscarContas()}),2e3),this.$route.params.id?setTimeout((function(){t.buscarObjeto(t.$route.params.id)}),400):this.adicionarItem()},watch:{"form.valor_acrescimo":function(t){this.calcularValorTotal()}},methods:{imprimir:function(){window.open("".concat(this.$store.state.url,"/print/nota-saida/").concat(this.form.id),"_blank")},novaVenda:function(){alert("Nova Venda"),this.componenteKey+=1,this.$router.go({name:"notaSaidaLancar"}),this.form={id:null,parceiro_id:"",numero:"",data_emissao:"",documento_frete:"",custo_frete:"",custo_outros:"",observacoes_custo:"",valor_subtotal:0,valor_desconto:0,valor_acrescimo:0,valor_total:0,nota_itens:[],caixa_id:""},this.adicionarItem()},key:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.form.id>0)return!1;switch(t.key){case"Insert":this.adicionarItem();break;case"Tab":e&&this.adicionarItem()}},validarFormulario:function(){return this.$v.form.$touch(),this.erros=null,this.sucesso=null,this.errosTitulo="",!this.$v.form.$invalid||(this.errosTitulo="Preencha o formulário corretamente, alguns campos estão com erros!",this.erros=this.$v.form,!1)},submit:function(){var t=this;if(!this.validarFormulario())return!1;var e=l({},this.form);(e.id?p.atualizar(e):p.criar(e)).then((function(e){var o=!t.form.id;if(t.form=e.data,t.sucesso="Registro salvo com sucesso!",o){var a=String(t.$route.path).lastIndexOf("/"),r=String(t.$route.path).slice(0,a);r+="/"+t.form.id,t.$router.push(r),t.buscarObjeto(t.form.id)}})).catch((function(e){return t.erros=e}))},calcularValorTotal:function(){this.form.valor_subtotal=this.soma_itens,this.form.valor_total=this.form.valor_subtotal-this.form.valor_desconto+this.form.valor_acrescimo},calculaValorsubTotalItem:function(t){t.valor_subtotal=t.qtde*t.valor_unitario+t.valor_acrescimo,this.calcularValorTotal()},adicionarItem:function(){var t=this.estoques.map((function(t){return t.id})).indexOf(this.estoque.id);this.form.nota_itens.push({qtde:1,valor_acrescimo:0,valor_desconto:0,estoque_id:this.estoque.id?this.estoque.id:"",estoque:this.estoque.id?this.estoques[t]:{}})},selecionarProduto:function(t){t.produto_codigo=t.produto.codigo,t.produto_descricao=t.produto.descricao,t.produto_id=t.produto.id,t.valor_unitario=Number(t.produto.preco_venda_a),this.calculaValorsubTotalItem(t)},salvarItem:function(){if(this.erroItemModal=null,this.sucessoItemModal=null,this.$v.itemModal.$touch(),this.$v.itemModal.$invalid)return this.erroItemModal=this.$v.itemModal,0;var t=l({},this.itemModal);t.index>=0?this.form.nota_itens.splice(t.index,1,t):this.form.nota_itens.push(t),this.sucessoItemModal="Produto ".concat(this.itemModal.produto_descricao," adicionado com sucesso!")},removerItem:function(t){this.form.nota_itens.splice(t,1),Vue.$toast.success("Item #".concat(t+1," Removido"))},qtde:function(t){return{decimal:",",thousands:".",prefix:"",suffix:"",precision:t,masked:!1}},buscarObjeto:function(t){var e=this;p.buscar(t).then((function(t){e.form=t.data,e.form.custo_frete=Number(t.data.custo_frete),e.form.custo_outros=Number(t.data.custo_outros),e.form.valor_subtotal=Number(t.data.valor_subtotal),e.form.valor_desconto=Number(t.data.valor_desconto),e.form.valor_acrescimo=Number(t.data.valor_acrescimo),e.form.valor_total=Number(t.data.valor_total),e.form.data_emissao=i()(e.form.data_emissao).toDate(),e.empresas=[t.data.empresa],e.empresa=e.empresas[0],t.data.parceiro&&(e.parceiros=[t.data.parceiro],e.parceiro=e.parceiros[0]),e.form.nota_itens=e.form.nota_itens.map((function(t){return t.valor_unitario=Number(t.valor_unitario),t.qtde=Number(t.qtde),t.valor_acrescimo=Number(t.valor_acrescimo),t.valor_desconto=Number(t.valor_desconto),t.valor_subtotal=Number(t.valor_subtotal),t}))})).catch((function(t){return e.erros=t}))},buscarEmpresas:function(){var t=this,e=this.user.id+"_empresas",o=localStorage.getItem(e);if(null!=o){o=JSON.parse(o);var a=new Date.getTime;if(o.expires>a)return this.empresas=o.empresas,1==this.empresas.length&&(this.empresa=this.empresas[0],this.form.empresa_id=this.empresa.id),!0}m.listar({ativa:!0}).then((function(e){t.empresas=e.data.data,1==t.empresas.length&&(t.empresa=t.empresas[0],t.form.empresa_id=t.empresa.id)})).catch((function(t){return console.log("Erros: ",t.response)}))},buscarEstoques:function(){var t=this;v.listar({ativo:!0}).then((function(e){t.estoques=e.data.data,t.estoque=t.estoques[0],t.form.nota_itens[0].estoque_id=t.estoque.id,t.form.nota_itens[0].estoque=t.estoques[0]})).catch((function(t){return console.log("Erros: ",t.response)}))},buscarParceirosDebounce:function(t,e){var o=this;clearTimeout(this.timer),this.timer=setTimeout((function(){o.buscarParceiros(t,e)}),700)},buscarParceiros:function(t,e){var o=this;this.buscandoParceiros=!0,_.listar({texto:t,per_page:50,id:this.form.id,tipo:"CLIENTE"}).then((function(t){return o.parceiros=t.data.data})).catch((function(t){return console.log(t)})).finally((function(){return o.buscandoParceiros=!1}))},buscarProdutosDebounce:function(t,e){var o=this;clearTimeout(this.timer),this.timer=setTimeout((function(){o.buscarProdutos(t,e)}),700)},buscarProdutos:function(t,e){var o=this;this.buscandoProdutos=!0;var a={texto:t,per_page:50,order:"descricao",venda:1,estoque_id:this.estoque.id};d.listar(a).then((function(t){return o.produtos=t.data.data.map((function(t){return t.preco_compra=Number(t.preco_compra),t.preco_custo=Number(t.preco_custo),t.label="".concat(t.codigo," | ").concat(t.descricao),t}))})).catch((function(t){return console.log(t)})).finally((function(){return o.buscandoProdutos=!1}))},buscarContasDebounce:function(){var t=this;clearTimeout(this.debounce),this.debounce=setTimeout((function(){t.buscarContas()}),800)},buscarContas:function(){var t=this;this.buscandoContas=!0,f.listar({tipo:"TRANSFERENCIA",per_page:50}).then((function(e){t.contas=e.data.data.map((function(t){return{id:t.id,label:"".concat(t.codigo," | ").concat(t.nome)}}))})).finally((function(){return t.buscandoContas=!1}))},desabilitaDataFutura:function(t){return t>new Date},selecionouEstoqueUnico:function(){var t=this;if(0==this.estoque_unico)this.estoque={},this.form.nota_itens=this.form.nota_itens.map((function(t){return t.estoque_id="",t.estoque={},t}));else if(this.estoque.id){var e=this.estoques.map((function(t){return t.id})).indexOf(this.estoque.id);this.form.nota_itens=this.form.nota_itens.map((function(o){return o.estoque=t.estoques[e],o.estoque_id=o.estoque.id,o}))}else this.form.nota_itens=this.form.nota_itens.map((function(t){return t.estoque_id="",t.estoque={},t}))},setarValorDesconto:function(){var t=this.form.valor_desconto/this.form.valor_subtotal*100;t=Math.round(1e4*t)/1e4,this.form.valor_desconto_percentual=t,this.calcularValorTotal()},setarValorDescontoPercentual:function(){var t=this.form.valor_desconto_percentual/100*this.form.valor_subtotal;t=Math.round(1e4*t)/1e4,this.form.valor_desconto=t,this.calcularValorTotal()}},computed:{user:function(){return this.$store.state.user},subtotal_geral_itens:function(){return this.form.nota_itens.reduce((function(t,e){return t+(e.valor_unitario>0?Number(e.valor_unitario):0)*(e.qtde>0?Number(e.qtde):0)}),0)},despesas_geral:function(){return Number(this.form.valor_acrescimo)+Number(this.form.custo_frete)+Number(this.form.custo_outros)-Number(this.form.valor_desconto)},total_geral:function(){return Number(this.form.valor_subtotal)+Number(this.form.valor_acrescimo)+Number(this.form.custo_frete)+Number(this.form.custo_outros)-Number(this.form.valor_desconto)},qtde_itens:function(){return this.form.nota_itens.length},qtde_itens_total:function(){return this.form.nota_itens.reduce((function(t,e){return t+(e.qtde>0?parseFloat(e.qtde):0)}),0)},soma_itens:function(){return this.form.nota_itens.reduce((function(t,e){return t+(e.valor_unitario>0?Number(e.valor_unitario):0)*(e.qtde>0?Number(e.qtde):0)+(e.valor_acrescimo>0?Number(e.valor_acrescimo):0)}),0)},saldo:function(){return this.total_geral-this.soma_itens},pode_trocar_estoque_unico:function(){return!(this.form.id>0)&&0==this.form.nota_itens.filter((function(t){return t.produto})).length}}},h=(o("Dkpk"),o("KHd+")),g=Object(h.a)(b,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("form",{staticClass:"row",on:{submit:function(e){return e.preventDefault(),t.submit()}}},[o("div",{staticClass:"col-lg-12"},[o("div",{staticClass:"card"},[o("div",{staticClass:"card-body"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-12"},[o("h3",[t._v("Nota de Saída "),t.form.id?o("span",[t._v(": "+t._s(t.form.numero))]):t._e()])]),t._v(" "),o("div",{staticClass:"col-sm-6"},[o("container-componente",{attrs:{validator:t.form.empresa_id,label:"Empresa"}},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.empresa,expression:"empresa"}],staticClass:"form-control",attrs:{disabled:null!=t.form.id},on:{change:[function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.empresa=e.target.multiple?o:o[0]},function(e){t.form.empresa_id=t.empresa.id}]}},t._l(t.empresas,(function(e){return o("option",{key:e.id,domProps:{value:e}},[t._v(" "+t._s(e.apelido)+" / "+t._s(e.cnpj)+" ")])})),0)])],1),t._v(" "),o("div",{staticClass:"col-sm-2"},[o("label",{staticClass:"control-label"},[t._v("Estoque Único")]),t._v(" "),o("div",{staticClass:"custom-control custom-checkbox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.estoque_unico,expression:"estoque_unico"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customCheckestoque_unico",disabled:!t.pode_trocar_estoque_unico},domProps:{checked:Array.isArray(t.estoque_unico)?t._i(t.estoque_unico,null)>-1:t.estoque_unico},on:{change:[function(e){var o=t.estoque_unico,a=e.target,r=!!a.checked;if(Array.isArray(o)){var s=t._i(o,null);a.checked?s<0&&(t.estoque_unico=o.concat([null])):s>-1&&(t.estoque_unico=o.slice(0,s).concat(o.slice(s+1)))}else t.estoque_unico=r},function(e){return t.selecionouEstoqueUnico()}]}}),t._v(" "),o("label",{staticClass:"custom-control-label",attrs:{for:"customCheckestoque_unico"}},[t._v("Estoque Único")])])]),t._v(" "),t.estoque_unico?o("div",{staticClass:"col-sm-4"},[o("container-componente",{attrs:{label:"Estoque"}},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.estoque,expression:"estoque"}],staticClass:"form-control",attrs:{disabled:!t.pode_trocar_estoque_unico},on:{change:[function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.estoque=e.target.multiple?o:o[0]},function(e){return t.selecionouEstoqueUnico()}]}},t._l(t.estoques,(function(e){return o("option",{key:e.id,domProps:{value:e}},[t._v(" "+t._s(e.nome)+" / "+t._s(e.fone)+" ")])})),0)])],1):t._e(),t._v(" "),o("div",{staticClass:"col-md-12"},[t.form.data_devolucao?o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-12"},[o("p",[t._v("Nota Estornada em: "+t._s(t._f("timeformat")(t.form.data_devolucao))+"\n                                    "),o("br"),t._v("Id da Nota de Devolucao: "+t._s(t.form.nota_id)+"\n                                ")])])]):t._e(),t._v(" "),o("hr"),t._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-sm-12"},[o("container-componente",{attrs:{validator:t.form.parceiro_id,label:"Cliente (Parceiro)"}},[o("vue-select",{staticStyle:{height:"calc(1.5em + 0.94rem - 6px)"},attrs:{placeholder:"Comece a digitar para buscar",disabled:null!=t.form.id,options:t.parceiros,label:"apelido"},on:{input:function(e){t.form.parceiro_id=t.parceiro.id},blur:t.$v.form.parceiro_id.$touch,search:t.buscarParceirosDebounce},scopedSlots:t._u([{key:"option",fn:function(e){return[t._v("\n                                            "+t._s(e.apelido)+" / "+t._s(e.razao_social)+"\n                                        ")]}}]),model:{value:t.parceiro,callback:function(e){t.parceiro=e},expression:"parceiro"}},[t._v(" "),o("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("Nenhum item encontrado!")]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.buscandoParceiros,expression:"buscandoParceiros"}],staticClass:"spinner"},[t._v("Buscando...")])])],1),t._v(" "),t.parceiro.id?o("p",[o("strong",[t._v("Nome: ")]),t._v(" "+t._s(t.parceiro.razao_social)+" "),t.parceiro.nome_fantasia?o("span",[t._v(" "+t._s(t.parceiro.nome_fantasia)+" ")]):t._e(),t._v(" "),o("br"),t._v(" "),o("strong",[t._v(t._s(t.parceiro.tipo_documento)+": ")]),t._v(" "+t._s(t.parceiro.documento)+" "),t.parceiro.estrangeiro?o("span",[t._v(" / Estrangeiro ")]):t._e(),t._v(" "),o("br"),t._v(" "),"JURIDICA"!=t.parceiro.tipo_pessoa||t.parceiro.estrangeiro?t._e():o("span",[o("strong",[t._v("Inscrição Estadual: ")]),t._v(" "+t._s(t.parceiro.rg_ie)),o("br"),t._v(" "),o("strong",[t._v("Inscrição Municipal: ")]),t._v(" "+t._s(t.parceiro.im?t.parceiro.im:"Não Informado")),o("br"),t._v(" "),o("strong",[t._v("Suframa: ")]),t._v(" "+t._s(t.parceiro.suframa?t.parceiro.im:"Não Informado")),o("br")]),t._v(" "),o("strong",[t._v("Endereço: ")]),t._v(t._s(t.parceiro.endereco_tipo)+" "+t._s(t.parceiro.logradouro)+", "+t._s(t.parceiro.numero)+" "),t.parceiro.complemento?o("span",[t._v(" - "+t._s(t.parceiro.complemento))]):t._e(),o("br"),t._v(" "),o("strong",[t._v("CEP: ")]),t._v(t._s(t.parceiro.cep)),o("br"),t._v(" "),o("strong",[t._v("Bairro: ")]),t._v(t._s(t.parceiro.bairro)),o("br")]):t._e()],1)]),t._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-sm-12"},[o("h4",[t._v("Produtos")]),t._v(" "),o("table",{staticClass:"table table-centered table-nowrap"},[o("thead",{staticClass:"thead-light"},[o("tr",[o("th",{staticStyle:{width:"50px"}},[t._v("Item")]),t._v(" "),o("th",{staticStyle:{"min-width":"400px"}},[t._v("Produto")]),t._v(" "),t._m(0),t._v(" "),o("th",{staticClass:"text-right"}),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t.estoque_unico?t._e():o("th",{staticClass:"text-left"},[o("br"),t._v("Estoque")]),t._v(" "),t._m(3),t._v(" "),o("th",{staticClass:"text-center"},[t._v("#")])])]),t._v(" "),t._l(t.form.nota_itens,(function(e,a){return o("tbody",{key:a,on:{keyup:function(e){t.key(e)}}},[o("tr",[o("td",{staticClass:"text-center item_tabela"},[t._v(t._s(a+1))]),t._v(" "),null==t.form.id?o("td",{attrs:{colspan:"5"}},[o("vue-select",{staticClass:"item_tabela",staticStyle:{"min-width":"400px"},attrs:{placeholder:"Comece a digitar para buscar",options:t.produtos,label:"label",clearable:!1},on:{input:function(o){return t.selecionarProduto(e)},search:t.buscarProdutosDebounce},model:{value:e.produto,callback:function(o){t.$set(e,"produto",o)},expression:"item.produto"}},[o("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("Nenhum item encontrado!")]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.buscandoProdutos,expression:"buscandoProdutos"}],staticClass:"spinner"},[t._v("Buscando...")])])],1):o("td",{staticClass:"item_tabela",attrs:{colspan:"4"}},[t._v("\n                                                "+t._s(e.produto_codigo)+" | "+t._s(e.produto_descricao)+"\n                                            ")]),t._v(" "),o("td",[t.form.id?t._e():o("button",{staticClass:"btn btn-danger btn-sm waves-effect waves-light",staticStyle:{height:"20px",padding:"1px 5px",width:"30px"},attrs:{type:"button",title:"Remover"},on:{click:function(e){return t.removerItem(a)}}},[o("i",{staticClass:"mdi mdi-trash-can font-size-12"})])])]),t._v(" "),o("tr",[o("td",{attrs:{colspan:"2"}},[t._v(" ")]),t._v(" "),o("td",{staticClass:"text-right"},[o("money",t._b({staticClass:"item_tabela",staticStyle:{"min-width":"75px",width:"100%","text-align":"center"},attrs:{readonly:null!=t.form.id},on:{input:function(o){return t.calculaValorsubTotalItem(e)}},model:{value:e.valor_unitario,callback:function(o){t.$set(e,"valor_unitario",o)},expression:"item.valor_unitario"}},"money",t.preco,!1))],1),t._v(" "),o("td",{staticClass:"text-right"},[e.produto?o("span",{directives:[{name:"popover",rawName:"v-popover",value:{name:"info-precos"+a},expression:"{ name: 'info-precos'+index }"}],staticStyle:{cursor:"pointer"}},[e.valor_unitario-e.valor_desconto>=e.produto.preco_venda_a?o("span",[t._v("A")]):e.valor_unitario-e.valor_desconto>=e.produto.preco_venda_b?o("span",[t._v("B")]):e.valor_unitario-e.valor_desconto>=e.produto.preco_venda_c?o("span",[t._v("C")]):e.valor_unitario-e.valor_desconto>=e.produto.preco_venda_d?o("span",[t._v("D")]):e.valor_unitario-e.valor_desconto>=e.produto.preco_venda_minimo?o("span",[t._v("M")]):o("span",{staticStyle:{color:"red"}},[t._v("x")]),t._v(" "),o("popover",{staticStyle:{left:"none",top:"none","text-align":"center"},attrs:{name:"info-precos"+a}},[o("p",[t._v("A - "+t._s(t._f("currency")(e.produto.preco_venda_a,t.$store.state.moeda))+" | "+t._s(e.produto.comissao_venda_a)+" % ")]),t._v(" "),o("p",[t._v("B - "+t._s(t._f("currency")(e.produto.preco_venda_b,t.$store.state.moeda))+" | "+t._s(e.produto.comissao_venda_b)+" % ")]),t._v(" "),o("p",[t._v("C - "+t._s(t._f("currency")(e.produto.preco_venda_c,t.$store.state.moeda))+" | "+t._s(e.produto.comissao_venda_c)+" % ")]),t._v(" "),o("p",[t._v("D - "+t._s(t._f("currency")(e.produto.preco_venda_d,t.$store.state.moeda))+" | "+t._s(e.produto.comissao_venda_d)+" % ")]),t._v(" "),o("p",[t._v("M - "+t._s(t._f("currency")(e.produto.preco_venda_minimo,t.$store.state.moeda))+" | "+t._s(e.produto.comissao_venda_minimo)+" % ")])])],1):t._e()]),t._v(" "),o("td",{staticClass:"text-center"},[o("money",t._b({staticClass:"item_tabela",staticStyle:{"min-width":"75px",width:"100%","text-align":"center"},attrs:{readonly:null!=t.form.id},on:{input:function(o){return t.calculaValorsubTotalItem(e)}},model:{value:e.qtde,callback:function(o){t.$set(e,"qtde",o)},expression:"item.qtde"}},"money",t.qtde(e.produto?e.produto.casas_decimais:0),!1))],1),t._v(" "),o("td",{staticClass:"text-center  "},[e.produto?o("span",{directives:[{name:"popover",rawName:"v-popover",value:{name:"info-qtde"+a},expression:"{ name: 'info-qtde'+index }"}],staticStyle:{cursor:"pointer"}},[t._v("\n                                                    "+t._s(t._f("qtde")(e.produto.disponivel,e.produto.casas_decimais))+"\n                                                    "),o("popover",{staticStyle:{width:"none",left:"none",top:"none","text-align":"left"},attrs:{name:"info-qtde"+a}},t._l(e.produto.disponiveis,(function(a,r){return o("p",{key:r},[o("strong",[t._v(t._s(t._f("qtde")(a.qtde,e.produto.casas_decimais))+": ")]),t._v(" "+t._s(a.estoque)+"  | "+t._s(a.fone))])})),0)],1):t._e()]),t._v(" "),t.estoque_unico?t._e():o("td",{staticClass:"text-right"},[o("select",{directives:[{name:"model",rawName:"v-model",value:e.estoque,expression:"item.estoque"}],staticClass:"form-control item_tabela",staticStyle:{"min-width":"100px"},on:{change:[function(o){var a=Array.prototype.filter.call(o.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(e,"estoque",o.target.multiple?a:a[0])},function(t){e.estoque_id=e.estoque.id}]}},t._l(t.estoques,(function(e){return o("option",{key:e.id,domProps:{value:e}},[t._v(" "+t._s(e.nome)+" ")])})),0)]),t._v(" "),o("td",{staticClass:"text-right",on:{keyup:function(e){return t.key(e,!0)}}},[o("money",t._b({staticClass:"item_tabela",staticStyle:{"min-width":"75px",width:"100%"},attrs:{readonly:!0},model:{value:e.valor_subtotal,callback:function(o){t.$set(e,"valor_subtotal",o)},expression:"item.valor_subtotal"}},"money",t.preco,!1))],1)])])})),t._v(" "),o("tbody",[o("tr",[o("td"),t._v(" "),o("td",{staticClass:"text-center",attrs:{colspan:"2"}},[t._v("Itens: "+t._s(t.qtde_itens))]),t._v(" "),o("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("Total de Itens:"+t._s(t.qtde_itens_total))]),t._v(" "),o("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("Total: "+t._s(t._f("currency")(t.soma_itens,t.$store.state.moeda))+" ")])]),t._v(" "),t.form.id?t._e():o("tr",[o("td",{attrs:{colspan:"3"}}),t._v(" "),o("td",{staticClass:"text-right",attrs:{colspan:"6"}},[o("button",{staticClass:"btn btn-primary btn-sm waves-effect waves-light",attrs:{type:"button",title:"Adicionar Item"},on:{click:function(e){return t.adicionarItem()}}},[o("i",{staticClass:"mdi mdi-plus font-size-18"}),t._v(" Adicionar Item")])])])])],2)]),t._v(" "),o("div",{staticClass:"col-sm-6"}),t._v(" "),o("div",{staticClass:"col-sm-6"},[o("hr"),t._v(" "),o("h4",[t._v("Totais")]),t._v(" "),o("table",{staticClass:"table table-centered table-nowrap"},[o("thead",{staticClass:"thead-light"},[o("tr",[o("th",{staticClass:"text-right",attrs:{width:"50%"}},[t._v("Subtotal")]),t._v(" "),o("th",{staticClass:"text-right",attrs:{width:"50%"}},[o("money",t._b({staticClass:"item_tabela",attrs:{disabled:!0},model:{value:t.form.valor_subtotal,callback:function(e){t.$set(t.form,"valor_subtotal",e)},expression:"form.valor_subtotal"}},"money",t.preco,!1))],1)]),t._v(" "),o("tr",[o("th",{staticClass:"text-right",attrs:{width:"50%"}},[t._v("Desconto %")]),t._v(" "),o("th",{staticClass:"text-right",attrs:{width:"50%"},on:{keyup:function(e){return t.setarValorDescontoPercentual()}}},[o("money",t._b({staticClass:"item_tabela",attrs:{disabled:null!=t.form.id},model:{value:t.form.valor_desconto_percentual,callback:function(e){t.$set(t.form,"valor_desconto_percentual",e)},expression:"form.valor_desconto_percentual"}},"money",t.desconto_percentual_mascara,!1))],1)]),t._v(" "),o("tr",[o("th",{staticClass:"text-right",attrs:{width:"50%"}},[t._v("Desconto "+t._s(t.$store.state.moeda))]),t._v(" "),o("th",{staticClass:"text-right",attrs:{width:"50%"},on:{keyup:function(e){return t.setarValorDesconto()}}},[o("money",t._b({staticClass:"item_tabela",attrs:{disabled:null!=t.form.id},model:{value:t.form.valor_desconto,callback:function(e){t.$set(t.form,"valor_desconto",e)},expression:"form.valor_desconto"}},"money",t.preco,!1))],1)]),t._v(" "),o("tr",[o("th",{staticClass:"text-right",attrs:{width:"50%"}},[t._v("Taxas")]),t._v(" "),o("th",{staticClass:"text-right",attrs:{width:"50%"}},[o("money",t._b({staticClass:"item_tabela",attrs:{disabled:null!=t.form.id},model:{value:t.form.valor_acrescimo,callback:function(e){t.$set(t.form,"valor_acrescimo",e)},expression:"form.valor_acrescimo"}},"money",t.preco,!1))],1)]),t._v(" "),o("tr",[o("th",{staticClass:"text-right",attrs:{width:"50%"}},[t._v("Total")]),t._v(" "),o("th",{staticClass:"text-right",attrs:{width:"50%"}},[o("money",t._b({staticClass:"item_tabela",attrs:{disabled:!0},model:{value:t.form.valor_total,callback:function(e){t.$set(t.form,"valor_total",e)},expression:"form.valor_total"}},"money",t.preco,!1))],1)])])])])])])]),t._v(" "),o("hr"),t._v(" "),o("div",{staticClass:"row"},[t.erros||t.sucesso?o("div",{staticClass:"col-md-12 text-center"},[t.erros?o("mensagem-componente",{attrs:{titulo:t.errosTitulo,erros:t.erros},on:{fechar:function(e){t.erros=null}}}):t._e(),t._v(" "),t.sucesso?o("mensagem-componente",{attrs:{sucesso:t.sucesso},on:{fechar:function(e){t.sucesso=null}}}):t._e()],1):t._e(),t._v(" "),o("div",{staticClass:"col-md-12 button-items text-center"},[o("router-link",{staticClass:"btn btn-warning waves-effect waves-light w-sm",attrs:{title:"Voltar",to:{name:"notaSaidaLista"}}},[o("i",{staticClass:"bx bx-arrow-back d-block font-size-16"}),t._v(" Voltar\n                        ")]),t._v(" "),t.form.id?t._e():o("button",{staticClass:"btn btn-primary waves-effect waves-light w-sm",attrs:{disabled:0==t.form.valor_total,type:"button","data-toggle":"modal","data-target":"#modal-finalizar-nota",title:"salvar"},on:{click:function(e){return t.validarFormulario()}}},[o("i",{staticClass:"bx bxs-save d-block font-size-16"}),t._v(" Salvar\n                        ")]),t._v(" "),t.form.id?o("button",{staticClass:"btn btn-success waves-effect waves-light w-sm",attrs:{type:"button",title:"Imprimir"},on:{click:function(e){return t.imprimir()}}},[o("i",{staticClass:"bx bx-printer d-block font-size-16"}),t._v(" Imprimir\n                        ")]):t._e()],1)])])])]),t._v(" "),o("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"modal-finalizar-nota",tabindex:"-1","aria-labelledby":"modal-finalizar-nota-title","aria-hidden":"true"}},[o("div",{staticClass:"modal-dialog modal-dialog-scrollable",staticStyle:{"min-height":"450px"}},[o("div",{staticClass:"modal-content"},[t._m(4),t._v(" "),o("div",{staticClass:"modal-body"},[o("p",[t._v("Selecione a forma de Pagamento!")]),t._v(" "),t._m(5),t._v(" "),o("p",[o("container-componente",{attrs:{label:"Caixa de Pagamento"}},[o("vue-select",{staticStyle:{height:"calc(1.5em + 0.94rem - 6px)"},attrs:{placeholder:"Comece a digitar para buscar",options:t.contas,label:"label"},on:{search:t.buscarContasDebounce,input:function(e){t.form.caixa_id=t.form.caixa.id}},model:{value:t.form.caixa,callback:function(e){t.$set(t.form,"caixa",e)},expression:"form.caixa"}},[o("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("Nenhum item encontrado!")]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.buscandoContas,expression:"buscandoContas"}],staticClass:"spinner"},[t._v("Buscando...")])])],1)],1),t._v(" "),t.erros?o("mensagem-componente",{attrs:{titulo:"Erro!",erros:t.erros},on:{fechar:function(e){t.erros=null}}}):t._e(),t._v(" "),t.sucesso?o("mensagem-componente",{attrs:{sucesso:t.sucesso},on:{fechar:function(e){t.sucesso=null}}}):t._e()],1),t._v(" "),o("div",{staticClass:"modal-footer"},[t._m(6),t._v(" "),o("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:!t.form.caixa_id||t.$v.form.$invalid||t.sucesso||t.form.id>0}},[o("i",{staticClass:"mdi mdi-content-save font-size-18"}),t._v(" Salvar ")]),t._v(" "),t.form.id?o("button",{staticClass:"btn btn-success waves-effect waves-light w-sm",attrs:{type:"button",title:"Imprimir"},on:{click:function(e){return t.imprimir()}}},[o("i",{staticClass:"bx bx-printer d-block font-size-16"}),t._v(" Imprimir\n                    ")]):t._e(),t._v(" "),t.form.id?o("button",{staticClass:"btn btn-success waves-effect waves-light w-sm",attrs:{"data-dismiss":"modal",title:"Nova Venda"},on:{click:function(e){return t.novaVenda()}}},[o("i",{staticClass:"bx d-block bxs-plus-square font-size-16"}),t._v(" Nova Venda\n                        ")]):t._e()])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("th",{staticClass:"text-right"},[e("br"),this._v("Valor Unitário")])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",{staticClass:"text-center"},[e("br"),this._v("Qtde")])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",{staticClass:"text-right"},[e("br"),this._v("D")])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",{staticClass:"text-right"},[e("br"),this._v("Subtotal")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title mt-0",attrs:{id:"modal-finalizar-notaTitle"}},[this._v("  Finalização !")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("select",{staticClass:"form-control",attrs:{disabled:""}},[e("option",{attrs:{selected:""}},[this._v("À Vista")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[e("i",{staticClass:"mdi mdi-close-circle font-size-18"}),this._v(" Voltar")])}],!1,null,"0b1a1a89",null);e.default=g.exports},"d+bN":function(t,e,o){var a=o("moDc");"string"==typeof a&&(a=[[t.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};o("aET+")(a,r);a.locals&&(t.exports=a.locals)},moDc:function(t,e,o){(t.exports=o("I1BE")(!1)).push([t.i,".form-group[data-v-0b1a1a89]{margin-bottom:.5rem}.mb-10[data-v-0b1a1a89]{margin-bottom:1rem!important}.item-table[data-v-0b1a1a89]{width:110px;margin:0;padding:1px;border:none;text-align:right}.table td[data-v-0b1a1a89],table th[data-v-0b1a1a89]{padding:3px 5px 3px 0}.label-preco[data-v-0b1a1a89]{margin-top:0;padding-top:0!important}.item_tabela[data-v-0b1a1a89]{text-align:right;margin:0;border:0;font-size:12pt}",""])}}]);
//# sourceMappingURL=22.js.map