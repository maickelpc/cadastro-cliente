(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"8xPj":function(a,t,o){(a.exports=o("I1BE")(!1)).push([a.i,".form-group[data-v-8fb64a3c]{margin-bottom:.5rem}.mb-10[data-v-8fb64a3c]{margin-bottom:1rem!important}.item-table[data-v-8fb64a3c]{width:110px;margin:0;padding:1px;border:none;text-align:right}.table td[data-v-8fb64a3c],table th[data-v-8fb64a3c]{padding:3px 5px 3px 0}.label-preco[data-v-8fb64a3c]{margin-top:0;padding-top:0!important}.ellipsis[data-v-8fb64a3c]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:250px}",""])},E7OU:function(a,t,o){"use strict";o("WANu")},WANu:function(a,t,o){var e=o("8xPj");"string"==typeof e&&(e=[[a.i,e,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};o("aET+")(e,s);e.locals&&(a.exports=e.locals)},pCYN:function(a,t,o){"use strict";o.r(t);var e,s=o("ta7f"),r=o("gR0X"),i=o("wd/R"),c=o.n(i);function l(a){return function(a){if(Array.isArray(a))return n(a)}(a)||function(a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}(a)||function(a,t){if(!a)return;if("string"==typeof a)return n(a,t);var o=Object.prototype.toString.call(a).slice(8,-1);"Object"===o&&a.constructor&&(o=a.constructor.name);if("Map"===o||"Set"===o)return Array.from(a);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return n(a,t)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(a,t){(null==t||t>a.length)&&(t=a.length);for(var o=0,e=new Array(t);o<t;o++)e[o]=a[o];return e}function d(a,t){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),o.push.apply(o,e)}return o}function v(a){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?d(Object(o),!0).forEach((function(t){m(a,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(o,t))}))}return a}function m(a,t,o){return t in a?Object.defineProperty(a,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[t]=o,a}var u=new r.v,_=new r.A,f=new r.t,p=new r.w,b=new r.c,h=new r.m,C=new r.y,g={data:function(){var a;return m(a={form:{id:null,parceiro_id:"",servicos:[],caixa:null,caixa_id:"",devolucao_data:null,forma_pagamento_id:"",com_saldo:!1,forma_desc:""},novo_status:"",observacoes:"",tipos_item:[],saldo_cliente:0,parceiros:[],buscandoParceiros:!1,sucesso:null,erros:null,errosTitulo:"",timer:null,contas:[],buscandoContas:!1,erroModal:null,sucessoModal:null,observacoes_avulsas:"",servicoModal:null,queroRemover:!1},"contas",[]),m(a,"formasPagamento",[]),m(a,"sucessoCancelar",null),m(a,"erroCancelar",null),m(a,"servicos_item",[]),m(a,"preco",{decimal:",",thousands:".",prefix:this.$store.state.moeda+" ",suffix:"",precision:2,masked:!1}),a},validations:function(){return{observacoes:{required:s.required},servicoModal:{ordem_servico_id:{required:s.required},servico_item_id:{required:s.required},descricao:{maxLength:Object(s.maxLength)(200)},valor:{required:s.required,minValue:Object(s.minValue)(0)},valor_unitario:{required:s.required,minValue:Object(s.minValue)(.01)},qtde:{required:s.required,minValue:Object(s.minValue)(.001)},aprovado:{}},form:{parceiro_id:{required:s.required},descricao:{},data_entrada:{},acessorios:{},avarias:{},observacoes:{},status:{},aprovacao_data:{},aprovacao_observacoes:{},devolucao_data:{required:Object(s.requiredIf)((function(){return this.form.forma_pagamento_id}))},devolucao_observacoes:{},devolucao_usuario_id:{},valor:{},parcelas:[],fotos_entrada:{},fotos_saida:{},servicos:{required:s.required},forma_desc:{required:Object(s.requiredIf)((function(){return this.form.caixa&&this.form.caixa.conta_bancaria}))}}}},methods:(e={submit:function(){var a=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.$v.form.$touch(),this.erros=null,this.sucesso=null,this.errosTitulo="",this.$v.form.$invalid)return this.errosTitulo="Preencha o formulário corretamente, alguns campos estão com erros!",this.erros=this.$v.form,!1;this.form.valor_subtotal=this.valor_total,this.form.valor_total=this.valor_total;var o=v({},this.form);o.servicos=l(this.form.servicos);(o.id?f.atualizar(o):f.criar(o)).then((function(o){var e=!a.form.id;if(t&&(a.sucesso="Registro salvo com sucesso!"),e){var s=String(a.$route.path).lastIndexOf("/"),r=String(a.$route.path).slice(0,s);r+="/"+a.form.id,a.$router.push(r),a.buscarObjeto(a.form.id)}else a.buscarObjeto(a.form.id)})).catch((function(o){t?a.erros=o:console.log(o,o.response)}))},abrirModalStatus:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.sucessoModal=null,this.erroModal=null,this.novo_status=a,this.observacoes="",this.$v.observacoes.$reset()},atualizarStatus:function(){var a=this;if(this.sucessoModal=null,this.erroModal=null,this.$v.observacoes.$invalid)return this.erroModal="É necessário preencher o campo de observações!",this.$v.observacoes.$touch(),!1;var t={id:this.form.id,status:this.novo_status,observacoes:this.observacoes};f.atualizarStatus(t).then((function(t){a.form.status=a.novo_status,a.novo_status="",a.observacoes="",a.sucessoModal="Status atualizado com sucesso!!!",a.$v.observacoes.$reset(),a.form.observacoes=t.data.observacoes})).catch((function(t){a.erroModal=t}))},podeTrocarStatus:function(a){if(this.form.status==a)return!1;switch(this.form.status){case"PENDENTE":return["AGUARDANDO PECA","ANDAMENTO","AGUARDANDO RETIRADA","ENTREGUE"].indexOf(a)<0;case"ORCAMENTO":return["AGUARDANDO RETIRADA","ENTREGUE","AGUARDANDO PECA"].indexOf(a)<0;case"CANCELADO":return["AGUARDANDO RETIRADA","ORCAMENTO","AGUARDANDO PECA","ANDAMENTO","ENTREGUE"].indexOf(a)<0;case"AGUARDANDO PECA":return["PENDENTE","CANCELADO","ENTREGUE"].indexOf(a)<0;case"ANDAMENTO":return["PENDENTE","ORCAMENTO","ENTREGUE"].indexOf(a)<0;case"AGUARDANDO RETIRADA":case"SAIU PARA ENTREGA":return["PENDENTE","ANDAMENTO","ORCAMENTO","AGUARDANDO PECA","ANDAMENTO","ENTREGUE"].indexOf(a)<0;case"ENTREGUE":return["PENDENTE","ORCAMENTO","CANCELADO","AGUARDANDO PECA","ANDAMENTO","AGUARDANDO RETIRADA","ENTREGUE"].indexOf(a)<0}},novaObservacaoAvulsa:function(){var a=this,t={id:this.form.id,observacoes:this.observacoes_avulsas};f.observacoes(t).then((function(t){a.form.observacoes=t.data.observacoes,a.observacoes_avulsas="",Vue.$toast.success("Observação registrada com sucesso!")})).catch((function(a){console.log(a,a.response),Vue.$toast.error("Não foi possível registrar esta observação!")}))},abrirModalServico:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.erroModal=null,this.sucessoModal=null,this.queroRemover=!1,this.$v.servicoModal.$reset(),null==a)this.servicoModal={servico_item_id:"",ordem_servico_id:this.form.id,valor:0,valor_unitario:0,qtde:0,descricao:""};else{a.valor_unitario=Number(a.valor_unitario),a.qtde=Number(a.qtde),a.valor=Number(a.valor);var t=this.servicos_item.map((function(a){return a.id})).indexOf(a.servico_item_id);a.servico_item=this.servicos_item[t],this.servicoModal=v({},a),this.selecionouServicoItem()}this.$forceUpdate()},atualizarServico:function(){var a=this;if(this.erroModal=null,this.sucessoModal=null,this.$v.servicoModal.$touch(),this.$v.servicoModal.$invalid)return this.erroModal=this.$v.servicoModal,0;var t=v({},this.servicoModal);t.aprovado="APROVADO",f.atualizarServico(t).then((function(t){a.sucessoModal="Serviço atualizado com Sucesso!!!";var o=t.data,e=a.form.servicos.map((function(a){return a.id})).indexOf(o.id);o.novo_valor=Number(o.valor),o.valor=Number(o.valor),o.novo_aprovado=o.aprovado,o.erros=null,o.sucesso=null,e<0?a.form.servicos.push(o):a.form.servicos.splice(e,1,o),a.submit(!1)})).catch((function(t){a.erroModal=t})).finally((function(){return a.$forceUpdate()}))},removerServico:function(){var a=this;if(this.erroModal=null,this.sucessoModal=null,this.form.servicos.length<=1)return this.erroModal="Este é o último serviço da ordem e não pode ser excluído",console.log(erroModal),!1;f.removerServico(this.servicoModal).then((function(t){a.sucessoModal="Serviço removido com Sucesso!!!",a.form.servicos=a.form.servicos.filter((function(t){return t.id!=a.servicoModal.id})),a.submit(!1)})).catch((function(t){a.erroModal=t})).finally((function(){return a.$forceUpdate()}))},qtde:function(a,t){return{decimal:",",thousands:".",prefix:"",suffix:" "+t,precision:a,masked:!1}},buscarObjeto:function(a){var t=this;f.buscar(a).then((function(a){t.form=a.data,t.form.servicos=t.form.servicos.map((function(a){return a.novo_valor=Number(a.valor),a.valor=Number(a.valor),a.novo_aprovado=a.aprovado,a.erros=null,a.sucesso=null,a}))})).catch((function(a){return t.erros=a}))},buscarParceirosDebounce:function(a,t){var o=this;clearTimeout(this.timer),this.timer=setTimeout((function(){o.buscarParceiros(a,t)}),700)},buscarParceiros:function(a,t){var o=this;this.buscandoParceiros=!0,u.listar({texto:a,per_page:50,id:this.form.id,tipo:"CLIENTE"}).then((function(a){return o.parceiros=a.data.data})).catch((function(a){return console.log(a)})).finally((function(){return o.buscandoParceiros=!1}))},desabilitaDataFutura:function(a){return a>new Date},buscarTiposItem:function(){var a=this;_.listar({per_page:2e3}).then((function(t){a.tipos_item=t.data.data,a.$route.params.id>0&&a.buscarObjeto(a.$route.params.id)})).catch((function(a){return console.log(a)}))},imprimir:function(a){switch(a){case"entrada":return f.imprimirEntrada(this.form.id);case"entrega":return f.imprimirEntrega(this.form.id);case"orcamento":return f.imprimirOrcamento(this.form.id);case"laudo":return f.imprimirLaudo(this.form.id)}},buscarServicosItem:function(){var a=this;C.listar({ativo:1,per_page:1e3}).then((function(t){a.servicos_item=t.data.data.map((function(a){return a.valor_unitario=Number(a.valor_unitario),a}))})).catch((function(t){console.log("Erro ao buscar Serviços Itens: ",t,t.response),setTimeout((function(){a.buscarServicosItem()}),2e3)}))},selecionouServicoItem:function(){var a=this;setTimeout((function(){a.servicoModal.servico_item_id=a.servicoModal.servico_item.id;var t=a.servicoModal.servico_item.valor_unitario;a.cliente_tem_tabela()?(t=a.valor_unitario_cliente(),a.servicoModal.valor_unitario=0==a.servicoModal.valor_unitario?t:a.servicoModal.valor_unitario,a.servicoModal.valor_selecionado="Cliente",a.servicoModal.servico_item.valor_unitario_cliente=t):(a.servicoModal.valor_selecionado="Tabela",a.servicoModal.valor_unitario=0==a.servicoModal.valor_unitario?t:a.servicoModal.valor_unitario,a.servicoModal.servico_item.valor_unitario_cliente=0)}),10)},cliente_tem_tabela:function(){return!(!this.form.parceiro||!this.form.parceiro.tabela_servicos)&&(!(this.form.parceiro.tabela_servicos.map((function(a){return a.id})).indexOf(this.servicoModal.servico_item_id)<0)&&this.form.parceiro.tabela_servicos[this.form.parceiro.tabela_servicos.map((function(a){return a.id})).indexOf(this.servicoModal.servico_item_id)].pivot.valor_unitario>0)},valor_unitario_cliente:function(){if(!this.form.parceiro||!this.form.parceiro.tabela_servicos)return-1;var a=this.form.parceiro.tabela_servicos[this.form.parceiro.tabela_servicos.map((function(a){return a.id})).indexOf(this.servicoModal.servico_item_id)];return a.pivot.valor_unitario>0?a.pivot.valor_unitario:a.valor_unitario},buscarTabelaServicosCliente:function(){var a=this;setTimeout((function(){u.buscarTabelaServicos(a.form.parceiro_id).then((function(t){a.form.parceiro.tabela_servicos=t.data.map((function(a){return a.pivot.valor_unitario=Number(a.pivot.valor_unitario),a.valor_unitario=Number(a.valor_unitario),a}))}))}),800)},abrirModalFinalizar:function(){var a=this;setTimeout((function(){a.buscarSaldoCliente()}),50),0==this.contas.length&&setTimeout((function(){a.buscarContas()}),150),0==this.formasPagamento.length&&setTimeout((function(){a.buscarFormasPagamento()}),100),this.form.parcelas=[],this.erros=null,this.successo=null,this.form.devolucao_data=new Date},buscarSaldoCliente:function(){var a=this;this.saldo_cliente=0,b.buscarSaldoParceiro(this.form.parceiro.id).then((function(t){a.saldo_cliente=t.data[0].saldo,a.saldo_cliente<0&&Vue.$toast.error("Atenção! Este cliente está com saldo negativo!"),a.saldo_cliente>0&&Vue.$toast.success("Cliente com saldo disponível!")})).catch((function(t){Vue.$toast.error("Não foi possível carregar o saldo do parceiro"),console.log("Erro ao buscar saldo do parceiro",t,t.response),setTimeout((function(){a.buscarSaldo()}),2e3)}))},buscarFormasPagamento:function(){var a=this;h.listar({ativo:!0,per_page:1e3}).then((function(t){return a.formasPagamento=t.data.data}))},buscarContas:function(){var a=this;this.buscandoContas=!0,p.listar({tipo:"TRANSFERENCIA",per_page:50}).then((function(t){a.contas=t.data.data.map((function(a){return{id:a.id,label:"".concat(a.codigo," | ").concat(a.nome),banco:a.banco}}))})).finally((function(){return a.buscandoContas=!1}))},selecionarFormaPagamento:function(a){"credito_futuro"==a?(this.form.formaPagamento={id:-1,nome:"Crédito",descricao:"Cobrança Futura",vista:!0},this.form.forma_pagamento_id=-1):(this.form.formaPagamento=a,this.form.forma_pagamento_id=a.id),a&&a.caixa?(this.form.caixa=a.caixa,this.form.caixa_id=a.caixa.id):(delete this.form.caixa,delete this.form.caixa_id),this.gerarParcelas()},gerarParcelas:function(){if(!this.form.formaPagamento.vista||!this.form.formaPagamento.compensa_automatico||this.form.formaPagamento.dias>0){this.form.qtde_parcelas||(this.form.qtde_parcelas=1);var a=Number((this.valor_total/this.form.qtde_parcelas).toFixed(2)),t=0;this.form.parcelas=[];for(var o=c()().add(this.form.formaPagamento.dias,"days"),e=1;e<=this.form.qtde_parcelas;e++)this.form.parcelas.push({parcela:this.form.formaPagamento.vista||this.form.formaPagamento.entrada?e-1:e,parcelas:this.form.qtde_parcelas,valor:e!=this.form.qtde_parcelas?a:Number((this.valor_total-t).toFixed(2)),data_vencimento:o.toDate()}),t+=a,o=o.add(1,"months")}else this.form.qtde_parcelas=0,this.form.parcelas=null;this.$forceUpdate()},finalizar:function(){var a=this;this.erros=null,this.successo=null,this.form.valor_subtotal=this.valor_total,this.form.valor_total=this.valor_total,this.form.caixa&&!this.form.caixa.conta_bancaria&&(this.form.forma_desc=""),f.entregarEquipamento(this.form).then((function(t){a.form.valor_subtotal=t.data.valor_subtotal,a.form.valor_acrescimo=t.data.valor_acrescimo,a.form.valor_desconto=t.data.valor_desconto,a.form.valor_total=t.data.valor_total,a.form.status=t.data.status,a.form.devolucao_data=t.data.devolucao_data,a.form.devolucao_observacoes=t.data.devolucao_observacoes,a.form.devolucao_usuario_id=t.data.devolucao_usuario_id,a.sucesso="Operação realizada com sucesso!"})).catch((function(t){return a.erros=t}))},buscarContasDebounce:function(){var a=this;clearTimeout(this.debounce),this.debounce=setTimeout((function(){a.buscarContas()}),800)}},m(e,"buscarContas",(function(){var a=this;this.buscandoContas=!0,p.listar({tipo:"TRANSFERENCIA",per_page:50}).then((function(t){a.contas=t.data.data.map((function(a){return{id:a.id,label:"".concat(a.codigo," | ").concat(a.nome),banco:a.banco}}))})).finally((function(){return a.buscandoContas=!1}))})),m(e,"cancelar",(function(){var a=this;if(this.erroCancelar=null,this.sucessoCancelar=null,this.errosTitulo="",this.$v.observacoes.$invalid)return this.erroModal="É necessário preencher o campo de observações!",this.$v.observacoes.$touch(),!1;var t={id:this.form.id,observacoes:this.observacoes};f.cancelar(t).then((function(t){a.form.status=t.data.status,a.sucessoCancelar="OS está em andamento novamente!"})).catch((function(t){return a.erroCancelar=t}))})),m(e,"desabilitaDataFutura",(function(a){return a>new Date})),e),mounted:function(){var a=this;setTimeout((function(){a.buscarTiposItem()}),50),setTimeout((function(){a.buscarServicosItem()}),50)},computed:{editando:function(){return this.$route.params.id>0},podeAdicionarServico:function(){return!this.editando||!0},podeEditar:function(){return["ENTREGUE","CANCELADO"].indexOf(this.form.status)<0},itens_por_tipo:function(){var a=this,t=this.form.servicos.filter((function(a){return null!=a.servico_item_id})).map((function(a){return a.servico_item_id}));return console.log("Itens 1208",t),t=l(new Set(t)),console.log("Itens 1210",t),t=t.map((function(t){var o=a.form.servicos.filter((function(a){return a.servico_item_id==t}));return console.log("Itens Total 1212",t,o),{servico_item:o[0].servico_item,qtde_total:o.reduce((function(a,t){return Number(a)+Number(t.qtde)}),0),valor_total:o.reduce((function(a,t){return Number(a)+Number(t.valor)}),0)}}))},valor_total:function(){return this.form.servicos?this.form.servicos.reduce((function(a,t){return Number(a)+Number(t.valor)}),0):0}}},x=(o("E7OU"),o("KHd+")),A=Object(x.a)(g,(function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("div",{staticClass:"row"},[o("div",{staticClass:"col-lg-12"},[o("div",{staticClass:"card"},[o("div",{staticClass:"card-body"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-12"},[o("h3",[a._v("Ordem de Lavagem "),a.form.id?o("span",[a._v(": "+a._s(a.form.id))]):a._e(),a._v(" "),o("div",{staticClass:"float-right"},[o("div",{staticClass:"dropdown"},[a._m(0),a._v(" "),o("div",{staticClass:"dropdown-menu dropdown-menu-right dropdown-menu-md"},[o("a",{staticClass:"dropdown-item",attrs:{href:a.imprimir("entrada"),target:"_blank"}},[a._v("Termo de Entrada")]),a._v(" "),o("a",{staticClass:"dropdown-item",attrs:{href:a.imprimir("entrega"),target:"_blank"}},[a._v("Termo de Entrega")])])])])])]),a._v(" "),o("div",{staticClass:"col-md-12 text-right"},[o("h5",[a._v("Valor: "+a._s(a._f("currency")(a.form.valor_total,a.$store.state.moeda)))])]),a._v(" "),o("div",{staticClass:"col-md-12"},[a._m(1),a._v(" "),o("div",{staticClass:"tab-content p-3 text-muted"},[o("div",{staticClass:"tab-pane active",attrs:{id:"entrada",role:"tabpanel"}},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-sm-6"},[o("h5",[a._v("Cliente")]),a._v(" "),o("p",{staticClass:"mb-0"},[o("strong",[a._v("Cliente: ")]),a._v(" "+a._s(a.form.parceiro?a.form.parceiro.razao_social:"")+" "),o("br"),a._v(" "),o("strong",[a._v("Telefone: ")]),a._v(" "+a._s(a.form.parceiro?a.form.parceiro.fone:"")+" "),o("br"),a._v(" "),o("strong",[a._v("Email: ")]),a._v(" "+a._s(a.form.parceiro?a.form.parceiro.email:"")+"\n                                        ")])]),a._v(" "),o("div",{staticClass:"col-sm-6"},[o("h5",[a._v("Situação Geral da Ordem")]),a._v(" "),o("p",{staticClass:"mb-0"},[o("strong",[a._v("Status:    ")]),a._v(" "),o("span",{staticClass:"badge badge-dark",staticStyle:{"font-size":"12px"}},[a._v(a._s(a.form.status))]),a._v(" "),"ENTREGUE"==a.form.status?o("span",[a._v("em "+a._s(a._f("dateformat")(a.form.devolucao_data)))]):a._e()]),a._v(" "),"ENTREGUE"==a.form.status&&a.form.cobranca_pendente?o("p",{staticClass:"mb-0"},[o("span",{staticClass:"badge badge-danger",staticStyle:{"font-size":"12px"}},[a._v("Cobrança Pendente")])]):a._e()]),a._v(" "),a._m(2),a._v(" "),o("div",{staticClass:"col-sm-6"},[o("container-componente",{attrs:{validator:a.$v.form.descricao,label:"Descrição"}},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:a.form.descricao,expression:"form.descricao"}],staticClass:"form-control",attrs:{rows:"2",disabled:!a.podeEditar},domProps:{value:a.form.descricao},on:{blur:function(t){return a.$v.form.descricao.$touch()},input:function(t){t.target.composing||a.$set(a.form,"descricao",t.target.value)}}})])],1),a._v(" "),o("div",{staticClass:"col-sm-12"},[o("hr"),a._v(" "),o("h5",[a._v("Serviços")]),a._v(" "),o("div",{staticClass:"table-responsive"},[o("table",{staticClass:"table table-nowrap table-centered mb-0"},[o("thead",[o("tr",[o("th",{attrs:{scope:"col"}},[a._v("Id")]),a._v(" "),o("th",{attrs:{scope:"col"}},[a._v("Serviço")]),a._v(" "),o("th",{attrs:{scope:"col"}},[a._v("Descrição")]),a._v(" "),o("th",{attrs:{scope:"col"}},[a._v("Valor Unit")]),a._v(" "),o("th",{attrs:{scope:"col"}},[a._v("Qtde")]),a._v(" "),o("th",{attrs:{scope:"col"}},[a._v("Valor")]),a._v(" "),a.podeEditar?o("th",[a._v("#")]):a._e()])]),a._v(" "),o("tbody",[a._l(a.form.servicos,(function(t){return o("tr",{key:t.id},[o("td",[o("div",{staticClass:"text-muted"},[a._v(a._s(t.id))])]),a._v(" "),o("td",[o("div",{staticClass:"text-muted ellipsis"},[a._v(a._s(t.servico_item.nome))])]),a._v(" "),o("td",[o("div",{staticClass:"text-muted ellipsis"},[a._v(a._s(t.descricao))])]),a._v(" "),o("td",[o("div",{staticClass:"text-muted"},[a._v(a._s(a._f("currency")(t.valor_unitario,a.$store.state.moeda)))])]),a._v(" "),o("td",[o("div",{staticClass:"text-muted"},[a._v(a._s(a._f("qtde")(t.qtde,t.servico_item.medida.decimais))+" "+a._s(t.servico_item.medida.sigla))])]),a._v(" "),o("td",[o("div",{staticClass:"text-muted"},[a._v(a._s(a._f("currency")(t.valor,a.$store.state.moeda)))])]),a._v(" "),a.podeEditar?o("td",[o("a",{attrs:{title:"Editar","data-toggle":"modal",href:"#modal-editar-servico"},on:{click:function(o){return o.preventDefault(),a.abrirModalServico(t)}}},[o("i",{staticClass:"font-size-18 mdi mdi-pencil-box warning"})])]):a._e()])})),a._v(" "),a.podeEditar?o("tr",[o("td",{staticClass:"text-left",attrs:{colspan:"7"}},[o("button",{staticClass:"btn btn-sm btn-primary",attrs:{"data-toggle":"modal","data-target":"#modal-editar-servico"},on:{click:function(t){return t.preventDefault(),a.abrirModalServico(null)}}},[o("i",{staticClass:"mdi mdi-clipboard-plus font-size-18"}),a._v(" Adicionar Serviço")])])]):a._e()],2)])])])])]),a._v(" "),o("div",{staticClass:"tab-pane",staticStyle:{"background-color":"#f8f8fb"},attrs:{id:"messages",role:"tabpanel"}},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-sm-12"},[o("div",{staticClass:"card",staticStyle:{margin:"10px"}},[o("h4",{staticClass:"card-title mt-0"},[a._v("Observações:")]),a._v(" "),o("ul",a._l(a.form.observacoes,(function(t,e){return o("li",{key:e},[o("p",{staticClass:"mb-20",staticStyle:{"padding-left":"20px"},domProps:{innerHTML:a._s(t)}})])})),0)])]),a._v(" "),o("div",{staticClass:"col-sm-12"},[o("div",{staticClass:"card",staticStyle:{margin:"10px"}},[o("div",{staticClass:"mt-4"},[o("h5",{staticClass:"font-size-14"},[a._v("Adicionar Observações")]),a._v(" "),o("div",{staticClass:"input-group"},[o("div",{staticClass:"custom-file"},[o("input",{directives:[{name:"model",rawName:"v-model",value:a.observacoes_avulsas,expression:"observacoes_avulsas"}],staticClass:"form-control",attrs:{placeholder:"Observações avulsas"},domProps:{value:a.observacoes_avulsas},on:{input:function(t){t.target.composing||(a.observacoes_avulsas=t.target.value)}}})]),a._v(" "),o("div",{staticClass:"input-group-append"},[o("button",{staticClass:"btn btn-primary",attrs:{disabled:0==a.observacoes_avulsas.length,type:"button",id:"inputGroupFileAddon04"},on:{click:function(t){return a.novaObservacaoAvulsa()}}},[a._v("Adicionar")])])])])])])])])])])])]),a._v(" "),o("hr"),a._v(" "),o("div",{staticClass:"row"},[a.erros||a.sucesso?o("div",{staticClass:"col-md-12 text-center"},[a.erros?o("mensagem-componente",{attrs:{titulo:a.errosTitulo,erros:a.erros},on:{fechar:function(t){a.erros=null}}}):a._e(),a._v(" "),a.sucesso?o("mensagem-componente",{attrs:{sucesso:a.sucesso},on:{fechar:function(t){a.sucesso=null}}}):a._e()],1):a._e(),a._v(" "),o("div",{staticClass:"col-md-12 button-items text-center"},[o("router-link",{staticClass:"btn btn-warning waves-effect waves-light w-sm",attrs:{title:"Voltar",to:{name:"ordemServicoLavanderia"}}},[o("i",{staticClass:"bx bx-arrow-back d-block font-size-16"}),a._v(" Voltar\n                    ")]),a._v(" "),"ANDAMENTO"==a.form.status?o("button",{staticClass:"btn btn-danger waves-effect waves-light w-sm",attrs:{type:"button",title:"Cancelar Ordem de Serviço","data-toggle":"modal","data-target":"#modal-alterar-status"},on:{click:function(t){return a.abrirModalStatus("CANCELADO")}}},[o("i",{staticClass:"bx bx bx-window-close d-block font-size-16"}),a._v(" Cancelar Ordem\n                    ")]):a._e(),a._v(" "),"ANDAMENTO"==a.form.status?o("button",{staticClass:"btn btn-primary waves-effect waves-light w-sm",attrs:{type:"button",title:"Atualizar Status da Ordem","data-toggle":"modal","data-target":"#modal-alterar-status"},on:{click:function(t){return a.abrirModalStatus("AGUARDANDO RETIRADA")}}},[o("i",{staticClass:"bx bx-store d-block font-size-16"}),a._v(" Pronta para Entrega\n                    ")]):a._e(),a._v(" "),"SAIU PARA ENTREGA"==a.form.status?o("button",{staticClass:"btn btn-primary waves-effect waves-light w-sm",attrs:{type:"button",title:"Atualizar Status da Ordem","data-toggle":"modal","data-target":"#modal-alterar-status"},on:{click:function(t){return a.abrirModalStatus("AGUARDANDO RETIRADA")}}},[o("i",{staticClass:"bx bx-store d-block font-size-16"}),a._v(" Retorno sem Entrega\n                    ")]):a._e(),a._v(" "),"ANDAMENTO"==a.form.status||"AGUARDANDO RETIRADA"==a.form.status?o("button",{staticClass:"btn btn-primary waves-effect waves-light w-sm",attrs:{type:"button",title:"Atualizar Status da Ordem","data-toggle":"modal","data-target":"#modal-alterar-status"},on:{click:function(t){return a.abrirModalStatus("SAIU PARA ENTREGA")}}},[o("i",{staticClass:"bx bxs-truck d-block font-size-16"}),a._v(" Saindo para Entrega\n                    ")]):a._e(),a._v(" "),"ANDAMENTO"==a.form.status||"AGUARDANDO RETIRADA"==a.form.status||"SAIU PARA ENTREGA"==a.form.status?o("button",{staticClass:"btn btn-primary waves-effect waves-light w-sm",attrs:{type:"button",title:"Finalizar","data-toggle":"modal","data-target":"#modal-finalizar-nota"},on:{click:function(t){return a.abrirModalFinalizar()}}},[o("i",{staticClass:"bx bx-money d-block font-size-16"}),a._v(" Ordem Entregue\n                    ")]):a._e(),a._v(" "),a.form.id&&"ENTREGUE"==a.form.status&&!a.sucessoCancelar?o("button",{staticClass:"btn btn-secondary waves-effect waves-light w-sm",attrs:{type:"button","data-toggle":"modal","data-target":"#modal-cancelar",title:"Voltar para Andamento"},on:{click:function(t){return a.abrirModalStatus()}}},[o("i",{staticClass:"bx bx-rotate-left d-block font-size-16"}),a._v(" Voltar para Andamento\n                    ")]):a._e()],1)])])]),a._v(" "),o("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"modal-alterar-status",tabindex:"-1","aria-labelledby":"modal-alterar-status-title","aria-hidden":"true"}},[o("div",{staticClass:"modal-dialog modal-lg modal-dialog-scrollable",staticStyle:{"min-height":"450px"}},[o("div",{staticClass:"modal-content"},[a._m(3),a._v(" "),o("form",{staticClass:"modal-body"},[o("div",{staticClass:"row"},[o("label",{staticClass:"col-sm-3 col-form-label"},[a._v("Status Atual")]),a._v(" "),o("div",{staticClass:"col-sm-9"},[a._v("\n                            "+a._s(a.form.status)+"\n                        ")]),a._v(" "),o("label",{staticClass:"col-sm-3 col-form-label"},[a._v("Situação")]),a._v(" "),o("div",{staticClass:"col-sm-9"},[o("p",[o("strong",[a._v(a._s(a.novo_status))])])]),a._v(" "),o("label",{staticClass:"col-sm-3 col-form-label"},[a._v("Observações")]),a._v(" "),o("div",{staticClass:"col-sm-9"},[o("container-componente",{attrs:{validator:a.$v.observacoes}},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:a.observacoes,expression:"observacoes"}],staticClass:"form-control",attrs:{rows:"4",placeholder:"Observações sobre a alteração de status"},domProps:{value:a.observacoes},on:{blur:function(t){return a.$v.observacoes.$touch()},input:function(t){t.target.composing||(a.observacoes=t.target.value)}}})])],1)])]),a._v(" "),o("div",{staticClass:"modal-footer row"},[a.erroModal||a.sucessoModal?o("div",{staticClass:"col-md-12"},[o("mensagem-componente",{attrs:{titulo:"Erro!",erros:a.erroModal},on:{fechar:function(t){a.erroModal=null}}}),a._v(" "),o("mensagem-componente",{attrs:{sucesso:a.sucessoModal},on:{fechar:function(t){a.sucessoModal=null}}})],1):a._e(),a._v(" "),o("div",{staticClass:"col-md-12 text-right"},[a._m(4),a._v(" "),a.sucessoModal?a._e():o("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:!a.novo_status},on:{click:function(t){return t.preventDefault(),a.atualizarStatus()}}},[o("i",{staticClass:"mdi mdi-content-save font-size-18"}),a._v(" Atualizar ")])])])])])]),a._v(" "),o("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"modal-finalizar-nota",tabindex:"-1","aria-labelledby":"modal-finalizar-nota-title","aria-hidden":"true"}},[o("div",{staticClass:"modal-dialog modal-dialog-scrollable modal-lg",staticStyle:{"min-height":"450px"}},[o("form",{staticClass:"modal-content",on:{submit:function(t){return t.preventDefault(),a.finalizar()}}},[a._m(5),a._v(" "),o("div",{staticClass:"modal-body"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-sm-8"},[o("h4",[a._v("Valor Total: "),o("strong",[a._v(a._s(a._f("currency")(a.valor_total,a.$store.state.moeda)))])]),a._v(" "),o("p",[a._v("Saldo do Cliente: "),o("strong",[a._v(a._s(a._f("currency")(a.saldo_cliente,a.$store.state.moeda)))])])]),a._v(" "),o("div",{staticClass:"col-sm-4"},[o("container-componente",{attrs:{validator:a.$v.form.devolucao_data,label:"Data de Entrega"}},[o("date-picker",{attrs:{clearable:!1,format:"DD/MM/YYYY",disabledDate:a.desabilitaDataFutura},model:{value:a.form.devolucao_data,callback:function(t){a.$set(a.form,"devolucao_data",t)},expression:"form.devolucao_data"}})],1)],1),a._v(" "),a.valor_total<a.saldo_cliente?o("div",{staticClass:"col-sm-12"},[o("div",{staticClass:"custom-control custom-switch custom-switch-lg mb-3",attrs:{dir:"ltr"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:a.form.com_saldo,expression:"form.com_saldo"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customSwitchsizelg"},domProps:{checked:Array.isArray(a.form.com_saldo)?a._i(a.form.com_saldo,null)>-1:a.form.com_saldo},on:{change:function(t){var o=a.form.com_saldo,e=t.target,s=!!e.checked;if(Array.isArray(o)){var r=a._i(o,null);e.checked?r<0&&a.$set(a.form,"com_saldo",o.concat([null])):r>-1&&a.$set(a.form,"com_saldo",o.slice(0,r).concat(o.slice(r+1)))}else a.$set(a.form,"com_saldo",s)}}}),a._v(" "),o("label",{staticClass:"custom-control-label",attrs:{for:"customSwitchsizelg"}},[a._v("Baixar OS com o Saldo")])])]):a._e()]),a._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-12"},[o("p",{directives:[{name:"show",rawName:"v-show",value:!a.form.com_saldo,expression:"!form.com_saldo"}]},[a._v("Selecione a forma de Pagamento!")]),a._v(" "),o("container-componente",{directives:[{name:"show",rawName:"v-show",value:!a.form.com_saldo,expression:"!form.com_saldo"}],attrs:{validator:a.$v.form.forma_pagamento_id}},[o("div",{staticClass:"nav nav-pills",attrs:{id:"v-pills-tab",role:"tablist"}},[o("a",{staticClass:"nav-link",class:{active:-1==a.form.forma_pagamento_id},staticStyle:{"min-width":"140px"},attrs:{id:"v-pills-payment-tab","data-toggle":"pill",href:"#v-pills-payment",role:"tab","aria-controls":"v-pills-payment","aria-selected":"false"},on:{click:function(t){return a.selecionarFormaPagamento("credito_futuro")}}},[o("i",{staticClass:"bx bx-money d-block check-nav-icon mt-4 mb-2"}),a._v(" "),o("p",{staticClass:"font-weight-bold mb-4"},[a._v("Crédito")]),a._v(" "),o("small",[a._v("Cobrança Futura")])]),a._v(" "),a._l(a.formasPagamento,(function(t){return o("a",{key:t.id,staticClass:"nav-link",class:{active:a.form.forma_pagamento_id==t.id},staticStyle:{"min-width":"140px"},attrs:{id:"v-pills-payment-tab","data-toggle":"pill",href:"#v-pills-payment",role:"tab","aria-controls":"v-pills-payment","aria-selected":"false"},on:{click:function(o){return a.selecionarFormaPagamento(t)}}},[o("i",{staticClass:"bx bx-money d-block check-nav-icon mt-4 mb-2"}),a._v(" "),o("p",{staticClass:"font-weight-bold mb-4"},[a._v(a._s(t.nome))]),a._v(" "),o("small",[a._v(a._s(t.descricao))])])}))],2)]),a._v(" "),o("p",{directives:[{name:"show",rawName:"v-show",value:!a.form.com_saldo&&a.form.formaPagamento&&a.form.formaPagamento.id>0&&a.form.formaPagamento.vista&&!a.form.formaPagamento.caixa,expression:"!form.com_saldo && form.formaPagamento && form.formaPagamento.id > 0 && form.formaPagamento.vista && !form.formaPagamento.caixa"}]},[o("container-componente",{attrs:{label:"Caixa de Pagamento"}},[o("vue-select",{staticStyle:{height:"calc(1.5em + 0.94rem - 6px)"},attrs:{placeholder:"Comece a digitar para buscar",options:a.contas,label:"label"},on:{search:a.buscarContasDebounce,input:function(t){a.form.caixa_id=a.form.caixa.id}},model:{value:a.form.caixa,callback:function(t){a.$set(a.form,"caixa",t)},expression:"form.caixa"}},[o("div",{attrs:{slot:"no-options"},slot:"no-options"},[a._v("Nenhum item encontrado!")]),a._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:a.buscandoContas,expression:"buscandoContas"}],staticClass:"spinner"},[a._v("Buscando...")])])],1),a._v(" "),o("br")],1),a._v(" "),a.form.formaPagamento&&a.form.formaPagamento.vista&&a.form.formaPagamento.caixa?o("p",{directives:[{name:"show",rawName:"v-show",value:!a.form.com_saldo,expression:"!form.com_saldo"}]},[o("strong",[a._v("Caixa: ")]),a._v(" "+a._s(a.form.formaPagamento.caixa.nome)+"\n                            ")]):a._e(),a._v(" "),a.form.formaPagamento&&a.form.formaPagamento.id>0&&!a.form.formaPagamento.vista?o("div",{directives:[{name:"show",rawName:"v-show",value:!a.form.com_saldo,expression:"!form.com_saldo"}],staticClass:"row"},[o("div",{staticClass:"col-md-3"},[o("strong",[a._v("Parcelado em \n                                        "),o("select",{directives:[{name:"model",rawName:"v-model",value:a.form.qtde_parcelas,expression:"form.qtde_parcelas"}],staticClass:"form-control",on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.form,"qtde_parcelas",t.target.multiple?o:o[0])},function(t){return a.gerarParcelas()}]}},[1<=a.form.formaPagamento.parcelas_maximo?o("option",{domProps:{value:1}},[a._v("1x ")]):a._e(),a._v(" "),2<=a.form.formaPagamento.parcelas_maximo?o("option",{domProps:{value:2}},[a._v("2x ")]):a._e(),a._v(" "),3<=a.form.formaPagamento.parcelas_maximo?o("option",{domProps:{value:3}},[a._v("3x ")]):a._e(),a._v(" "),4<=a.form.formaPagamento.parcelas_maximo?o("option",{domProps:{value:4}},[a._v("4x ")]):a._e(),a._v(" "),5<=a.form.formaPagamento.parcelas_maximo?o("option",{domProps:{value:5}},[a._v("5x ")]):a._e(),a._v(" "),6<=a.form.formaPagamento.parcelas_maximo?o("option",{domProps:{value:6}},[a._v("6x ")]):a._e(),a._v(" "),7<=a.form.formaPagamento.parcelas_maximo?o("option",{domProps:{value:7}},[a._v("7x ")]):a._e(),a._v(" "),8<=a.form.formaPagamento.parcelas_maximo?o("option",{domProps:{value:8}},[a._v("8x ")]):a._e(),a._v(" "),9<=a.form.formaPagamento.parcelas_maximo?o("option",{domProps:{value:9}},[a._v("9x ")]):a._e(),a._v(" "),10<=a.form.formaPagamento.parcelas_maximo?o("option",{domProps:{value:10}},[a._v("10x ")]):a._e(),a._v(" "),11<=a.form.formaPagamento.parcelas_maximo?o("option",{domProps:{value:11}},[a._v("11x ")]):a._e(),a._v(" "),12<=a.form.formaPagamento.parcelas_maximo?o("option",{domProps:{value:12}},[a._v("12x ")]):a._e()])])]),a._v(" "),o("div",{staticClass:"col-md-9"},[o("div",{staticClass:"table-responsive"},[o("table",{staticClass:"table table-nowrap table-centered mb-0"},[a._m(6),a._v(" "),o("tbody",a._l(a.form.parcelas,(function(t){return o("tr",{key:t.parcela},[o("td",{staticClass:"text-center"},[a._v("\n                                                        "+a._s(t.parcela>0?t.parcela:"Entrada")+"                                                    \n                                                    ")]),a._v(" "),o("td",{staticClass:"text-center"},[o("date-picker",{attrs:{format:"DD/MM/YYYY"},on:{input:function(t){return a.$forceUpdate()}},model:{value:t.data_vencimento,callback:function(o){a.$set(t,"data_vencimento",o)},expression:"p.data_vencimento"}})],1),a._v(" "),o("td",{staticClass:"text-center"},[o("strong",[a._v(a._s(a._f("currency")(t.valor,a.$store.state.moeda)))])])])})),0)])])])]):a._e(),a._v(" "),a.form.caixa&&a.form.caixa.conta_bancaria?o("div",[o("container-componente",{attrs:{label:"Tipo do Pagamento"}},[o("select",{directives:[{name:"model",rawName:"v-model",value:a.form.forma_desc,expression:"form.forma_desc"}],staticClass:"form-control",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.form,"forma_desc",t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"PIX"}},[a._v("Pix")]),a._v(" "),o("option",{attrs:{value:"BOLETO"}},[a._v("Boleto Bancário")]),a._v(" "),o("option",{attrs:{value:"CARTAO_CREDITO"}},[a._v("Cartão de Crédito")]),a._v(" "),o("option",{attrs:{value:"CARTAO_DEBITO"}},[a._v("Cartão de Débito")]),a._v(" "),o("option",{attrs:{value:"DOC"}},[a._v("DOC")]),a._v(" "),o("option",{attrs:{value:"TED"}},[a._v("TED")])])])],1):a._e()],1)]),a._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-12"},[a.erros?o("mensagem-componente",{attrs:{titulo:"Erro!",erros:a.erros},on:{fechar:function(t){a.erros=null}}}):a._e(),a._v(" "),a.sucesso?o("mensagem-componente",{attrs:{sucesso:a.sucesso},on:{fechar:function(t){a.sucesso=null}}}):a._e()],1)])]),a._v(" "),o("div",{staticClass:"modal-footer"},[a._m(7),a._v(" "),o("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:!a.form.com_saldo&&!a.form.formaPagamento||!a.form.devolucao_data||a.sucesso||a.form.caixa&&a.form.caixa.conta_bancaria&&!a.form.forma_desc}},[o("i",{staticClass:"mdi mdi-content-save font-size-18"}),a._v(" Salvar ")])])])])]),a._v(" "),o("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"modal-cancelar",tabindex:"-1","aria-labelledby":"modal-cancelar-title","aria-hidden":"true"}},[o("div",{staticClass:"modal-dialog modal-dialog-scrollable modal-lg"},[o("div",{staticClass:"modal-content"},[a._m(8),a._v(" "),o("div",{staticClass:"modal-body"},[a.sucessoCancelar?a._e():o("p",[a._v("Tem certeza que deseja retornar a Ordem "),o("strong",[a._v(" "+a._s(a.form.id)+" ")]),a._v(" ?")]),a._v(" "),o("p",[a._v("Esta ação cancelar lançamentos financeiros!")]),a._v(" "),a.sucessoCancelar?o("div",{staticClass:"text-center"},[a._m(9),a._v(" "),o("p",{staticClass:"success text-center font-size-18"},[a._v(a._s(a.sucessoCancelar))])]):a._e(),a._v(" "),o("div",{staticClass:"row"},[o("label",{staticClass:"col-sm-3 col-form-label"},[a._v("Observações")]),a._v(" "),o("div",{staticClass:"col-sm-9"},[o("container-componente",{attrs:{validator:a.$v.observacoes}},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:a.observacoes,expression:"observacoes"}],staticClass:"form-control",attrs:{rows:"4",placeholder:"Observações sobre a alteração de status"},domProps:{value:a.observacoes},on:{blur:function(t){return a.$v.observacoes.$touch()},input:function(t){t.target.composing||(a.observacoes=t.target.value)}}})])],1)]),a._v(" "),a.erroCancelar?o("mensagem-componente",{attrs:{titulo:"Erro!",erros:a.erroCancelar},on:{fechar:function(t){a.erroCancelar=null}}}):a._e()],1),a._v(" "),o("div",{staticClass:"modal-footer"},[o("button",{staticClass:"btn btn-danger",attrs:{type:"button",disabled:a.sucessoCancelar},on:{click:function(t){return t.preventDefault(),a.cancelar()}}},[o("i",{staticClass:"mdi mdi-reply-circle font-size-18"}),a._v(" Voltar para Andamento ")]),a._v(" "),a._m(10)])])])]),a._v(" "),o("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"modal-editar-servico",tabindex:"-1","aria-labelledby":"modal-editar-title","aria-hidden":"true"}},[o("div",{staticClass:"modal-dialog modal-dialog-scrollable modal-lg"},[o("div",{staticClass:"modal-content"},[a._m(11),a._v(" "),a.servicoModal?o("div",{staticClass:"modal-body"},[o("div",{staticClass:"row"},[o("label",{staticClass:"col-sm-3 col-form-label"},[a._v("Serviço")]),a._v(" "),o("div",{staticClass:"col-sm-9"},[o("container-componente",{attrs:{validator:a.$v.servicoModal.servico_item_id}},[o("select",{directives:[{name:"model",rawName:"v-model",value:a.servicoModal.servico_item,expression:"servicoModal.servico_item"}],staticClass:"form-control",on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.servicoModal,"servico_item",t.target.multiple?o:o[0])},function(t){a.selecionouServicoItem(),a.$v.servicoModal.servico_item_id.$touch}]}},[o("option",{attrs:{value:"",disabled:""}},[a._v("Selecione uma opção")]),a._v(" "),a._l(a.servicos_item,(function(t){return o("option",{key:t.id,domProps:{value:t}},[a._v(a._s(t.nome))])}))],2)])],1),a._v(" "),o("label",{staticClass:"col-sm-3 col-form-label"},[a._v("Descrição")]),a._v(" "),o("div",{staticClass:"col-sm-9"},[o("input-componente",{attrs:{validator:a.$v.servicoModal.descricao},on:{blur:a.$v.servicoModal.descricao.$touch},model:{value:a.servicoModal.descricao,callback:function(t){a.$set(a.servicoModal,"descricao",t)},expression:"servicoModal.descricao"}})],1),a._v(" "),o("label",{staticClass:"col-sm-3 col-form-label"},[a._v("Valor Unitário")]),a._v(" "),o("div",{staticClass:"col-sm-9"},[o("container-componente",{attrs:{validator:a.$v.servicoModal.valor_unitario}},[o("money",a._b({staticClass:"form-control",on:{blur:a.$v.servicoModal.valor_unitario.$touch,input:function(t){a.servicoModal.valor=a.servicoModal.valor_unitario*a.servicoModal.qtde}},model:{value:a.servicoModal.valor_unitario,callback:function(t){a.$set(a.servicoModal,"valor_unitario",t)},expression:"servicoModal.valor_unitario"}},"money",a.preco,!1))],1),a._v(" "),a.servicoModal.servico_item?o("span",{directives:[{name:"popover",rawName:"v-popover",value:{name:"info-precos-modal"},expression:"{ name: 'info-precos-modal' }"}],staticStyle:{cursor:"pointer"}},[a.servicoModal.valor_unitario<a.servicoModal.servico_item.valor_unitario&&(a.servicoModal.servico_item.valor_unitario_cliente<=0||a.servicoModal.valor_unitario<a.servicoModal.servico_item.valor_unitario_cliente)?o("span",{staticStyle:{color:"red"}},[o("span",{staticClass:"fas fa-exclamation-triangle"}),a._v(" Valor Baixo\n                                ")]):o("span",[o("span",{staticClass:"fas fas fa-money-bill"}),a._v(" Preço\n                                ")]),a._v(" "),o("popover",{staticStyle:{left:"none",top:"none","text-align":"center"},attrs:{name:"info-precos-modal"}},[o("p",[a._v("Tabela: "+a._s(a._f("currency")(a.servicoModal.servico_item.valor_unitario,a.$store.state.moeda)))]),a._v(" "),o("p",[a._v("Cliente: "),a.servicoModal.servico_item.valor_unitario_cliente>0?o("span",[a._v(a._s(a._f("currency")(a.servicoModal.servico_item.valor_unitario_cliente,a.$store.state.moeda)))]):o("span",[a._v(" - ")])])])],1):a._e()],1),a._v(" "),o("label",{staticClass:"col-sm-3 col-form-label"},[a._v("Qtde")]),a._v(" "),o("div",{staticClass:"col-sm-9"},[o("container-componente",{attrs:{validator:a.$v.servicoModal.qtde}},[o("money",a._b({staticClass:"form-control",on:{blur:a.$v.servicoModal.qtde.$touch,input:function(t){a.servicoModal.valor=a.servicoModal.valor_unitario*a.servicoModal.qtde}},model:{value:a.servicoModal.qtde,callback:function(t){a.$set(a.servicoModal,"qtde",t)},expression:"servicoModal.qtde"}},"money",a.qtde(a.servicoModal.servico_item?a.servicoModal.servico_item.medida.decimais:2,a.servicoModal.servico_item?a.servicoModal.servico_item.unidade_medida:""),!1))],1)],1),a._v(" "),o("label",{staticClass:"col-sm-3 col-form-label"},[a._v("Subtotal")]),a._v(" "),o("div",{staticClass:"col-sm-9"},[o("container-componente",{attrs:{validator:a.$v.servicoModal.valor}},[o("money",a._b({staticClass:"form-control",attrs:{disabled:!0},on:{blur:a.$v.servicoModal.valor.$touch},model:{value:a.servicoModal.valor,callback:function(t){a.$set(a.servicoModal,"valor",t)},expression:"servicoModal.valor"}},"money",a.preco,!1))],1)],1)])]):a._e(),a._v(" "),o("div",{staticClass:"modal-footer row"},[a.erroModal||a.sucessoModal?o("div",{staticClass:"col-md-12"},[o("mensagem-componente",{attrs:{titulo:"Erro!",erros:a.erroModal},on:{fechar:function(t){a.erroModal=null}}}),a._v(" "),o("mensagem-componente",{attrs:{sucesso:a.sucessoModal},on:{fechar:function(t){a.sucessoModal=null}}})],1):a._e(),a._v(" "),o("div",{staticClass:"col-md-12 text-right"},[a.podeEditar&&a.servicoModal&&a.servicoModal.id?o("div",{staticStyle:{float:"left"}},[o("div",{staticClass:"custom-control custom-switch custom-switch-lg mb-3",attrs:{dir:"ltr"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:a.queroRemover,expression:"queroRemover"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customSwitchsizelg"},domProps:{checked:Array.isArray(a.queroRemover)?a._i(a.queroRemover,null)>-1:a.queroRemover},on:{change:function(t){var o=a.queroRemover,e=t.target,s=!!e.checked;if(Array.isArray(o)){var r=a._i(o,null);e.checked?r<0&&(a.queroRemover=o.concat([null])):r>-1&&(a.queroRemover=o.slice(0,r).concat(o.slice(r+1)))}else a.queroRemover=s}}}),a._v(" "),o("label",{staticClass:"custom-control-label",attrs:{for:"customSwitchsizelg"}},[a._v("Quero Excluir")])])]):a._e(),a._v(" "),a.servicoModal&&a.servicoModal.id?o("button",{staticClass:"btn btn-danger",attrs:{disabled:a.sucessoModal||!a.queroRemover},on:{click:function(t){return t.preventDefault(),a.removerServico()}}},[o("i",{staticClass:"mdi mdi-trash-can font-size-18"}),a._v(" Excluir Serviço ")]):a._e(),a._v(" "),o("button",{staticClass:"btn btn-primary",attrs:{disabled:a.sucessoModal},on:{click:function(t){return t.preventDefault(),a.atualizarServico()}}},[o("i",{staticClass:"mdi mdi-content-save font-size-18"}),a._v(" Salvar ")]),a._v(" "),a._m(12)])])])])])])}),[function(){var a=this.$createElement,t=this._self._c||a;return t("button",{staticClass:"btn btn-light dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t("i",{staticClass:"mdi mdi-printer mr-1"}),this._v(" "),t("span",{staticClass:"d-none d-sm-inline-block"},[this._v("Imprimir "),t("i",{staticClass:"mdi mdi-chevron-down"})])])},function(){var a=this.$createElement,t=this._self._c||a;return t("ul",{staticClass:"nav nav-tabs",attrs:{role:"tablist"}},[t("li",{staticClass:"nav-item"},[t("a",{staticClass:"nav-link active",attrs:{"data-toggle":"tab",href:"#entrada",role:"tab","aria-selected":"true"}},[t("span",{staticClass:"d-none d-sm-block"},[this._v("Dados Gerais")])])]),this._v(" "),t("li",{staticClass:"nav-item"},[t("a",{staticClass:"nav-link",attrs:{"data-toggle":"tab",href:"#messages",role:"tab","aria-selected":"false"}},[t("span",{staticClass:"d-none d-sm-block"},[this._v("Observações")])])])])},function(){var a=this.$createElement,t=this._self._c||a;return t("div",{staticClass:"col-sm-12"},[t("hr")])},function(){var a=this.$createElement,t=this._self._c||a;return t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title mt-0",attrs:{id:"modal-alterar-statusTitle"}},[this._v(" Altaração de Status ")]),this._v(" "),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var a=this.$createElement,t=this._self._c||a;return t("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t("i",{staticClass:"mdi mdi-close-circle font-size-18"}),this._v(" Fechar")])},function(){var a=this.$createElement,t=this._self._c||a;return t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title mt-0",attrs:{id:"modal-finalizar-notaTitle"}},[this._v(" Finalização !")]),this._v(" "),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var a=this.$createElement,t=this._self._c||a;return t("thead",[t("tr",[t("th",{attrs:{scope:"col"}},[this._v("Parcela")]),this._v(" "),t("th",{attrs:{scope:"col"}},[this._v("Data")]),this._v(" "),t("th",{staticStyle:{width:"30%"},attrs:{scope:"col"}},[this._v("Valor")])])])},function(){var a=this.$createElement,t=this._self._c||a;return t("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t("i",{staticClass:"mdi mdi-close-circle font-size-18"}),this._v(" Voltar")])},function(){var a=this.$createElement,t=this._self._c||a;return t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title mt-0",attrs:{id:"modal-cancelarTitle"}},[this._v("  Deseja realmente voltar esta Os para Andamento?")]),this._v(" "),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var a=this.$createElement,t=this._self._c||a;return t("div",{staticClass:"swal2-icon swal2-success swal2-icon-show",staticStyle:{display:"flex"}},[t("div",{staticClass:"swal2-success-circular-line-left",staticStyle:{"background-color":"rgb(255, 255, 255)"}}),this._v(" "),t("span",{staticClass:"swal2-success-line-tip"}),this._v(" "),t("span",{staticClass:"swal2-success-line-long"}),this._v(" "),t("div",{staticClass:"swal2-success-ring"}),this._v(" "),t("div",{staticClass:"swal2-success-fix",staticStyle:{"background-color":"rgb(255, 255, 255)"}}),this._v(" "),t("div",{staticClass:"swal2-success-circular-line-right",staticStyle:{"background-color":"rgb(255, 255, 255)"}})])},function(){var a=this.$createElement,t=this._self._c||a;return t("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t("i",{staticClass:"mdi mdi-close-circle font-size-18"}),this._v(" Fechar")])},function(){var a=this.$createElement,t=this._self._c||a;return t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title mt-0",attrs:{id:"modal-cancelarTitle"}},[this._v("  Editar Serviço")]),this._v(" "),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var a=this.$createElement,t=this._self._c||a;return t("button",{staticClass:"btn btn-secondary",attrs:{"data-dismiss":"modal"}},[t("i",{staticClass:"mdi mdi-close-circle font-size-18"}),this._v(" Fechar")])}],!1,null,"8fb64a3c",null);t.default=A.exports}}]);
//# sourceMappingURL=40.js.map