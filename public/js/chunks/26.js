(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{CVCh:function(t,a,s){"use strict";s("uYQq")},Gexf:function(t,a,s){"use strict";s.r(a);var e=s("gR0X"),o=s("ta7f");function i(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);a&&(e=e.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),s.push.apply(s,e)}return s}function r(t,a,s){return a in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t}var c=new e.m,n=new e.w,l={data:function(){return{dados:[],contas:[],filtro:{ordenar:"nome",ordem:"asc",page:1,per_page:2e3,texto:"",ativo:"TODOS"},paginacao:{current_page:0,last_page:0,from:0,to:0,per_page:2e3},debounce:null,forma:null,sucessoDeletar:null,erroDeletar:null,sucessoEditar:null,erroEditar:null,buscandoContas:null}},validations:{forma:{nome:{required:o.required,maxLength:Object(o.maxLength)(100)},descricao:{maxLength:Object(o.maxLength)(200)},vista:{required:o.required},dias:{required:o.required,minValue:Object(o.minValue)(0)},caixa_id:{},ativo:{required:o.required},compensa_automatico:{required:o.required},parcelas_maximo:{required:Object(o.requiredIf)((function(){return!1===this.forma.vista}))},entrada:{required:Object(o.requiredIf)((function(){return!1===this.forma.vista}))},taxa_sobre_total:{minValue:Object(o.minValue)(0)},taxa_sobre_total_forma:{required:Object(o.requiredIf)((function(){return this.forma.taxa_sobre_total>=.01}))},taxa_sobre_total_cobranca:{required:Object(o.requiredIf)((function(){return this.forma.taxa_sobre_total>=.01}))},taxa_sobre_transacao:{minValue:Object(o.minValue)(0)},taxa_sobre_transacao_forma:{required:Object(o.requiredIf)((function(){return this.forma.taxa_sobre_transacao>=.01}))},taxa_sobre_transacao_cobranca:{required:Object(o.requiredIf)((function(){return this.forma.taxa_sobre_transacao>=.01}))}}},mounted:function(){var t=this;setTimeout((function(){t.buscar()}),100)},methods:{abrirModalEditar:function(t){this.buscarContas(""),this.$v.forma.$reset(),this.sucessoEditar=null,this.erroEditar=null,this.forma=null==t?{dias:0}:function(t){for(var a=1;a<arguments.length;a++){var s=null!=arguments[a]?arguments[a]:{};a%2?i(Object(s),!0).forEach((function(a){r(t,a,s[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(s,a))}))}return t}({},t)},salvar:function(){var t=this;if(this.sucessoEditar=null,this.erroEditar=null,this.$v.forma.$touch(),this.$v.forma.$invalid)return this.erroEditar="Preencha os campos obrigatórios",!1;this.forma.vista||(this.forma.compensa_automatico=!1),this.forma.entrada=!1,(this.forma.id?c.atualizar(this.forma):c.criar(this.forma)).then((function(a){var s=a.data,e=t.dados.map((function(t){return t.id})).indexOf(s.id);e>-1?t.dados.splice(e,1,s):t.dados.push(s),t.sucessoEditar="Conta salva com sucesso!"})).catch((function(a){return t.erroEditar=a}))},deletar:function(){var t=this;this.sucessoDeletar=null,this.erroDeletar=null,c.deletar(this.forma.id).then((function(a){var s=t.dados.map((function(t){return t.id})).indexOf(t.forma.id);t.dados[s].ativo=!1,t.sucessoDeletar="Registro removido com sucesso!"})).catch((function(a){return t.erroDeletar=a}))},debounceBusca:function(){var t=this;clearTimeout(this.debounce),this.debounce=setTimeout((function(){t.navegar(1)}),800)},buscar:function(){var t=this;c.listar(this.filtro).then((function(a){t.$data.dados=a.data.data.map((function(t){return t.caixa&&(t.caixa.label="".concat(t.caixa.codigo," | ").concat(t.caixa.nome)),t}))}))},navegar:function(t){this.filtro.page=t,this.buscar()},buscarContasDebounce:function(){var t=this;clearTimeout(this.debounce),this.debounce=setTimeout((function(){t.buscarContas()}),800)},buscarContas:function(){var t=this;this.buscandoContas=!0,n.listar({tipo:"TRANSFERENCIA",per_page:50}).then((function(a){t.contas=a.data.data.map((function(t){return{id:t.id,label:"".concat(t.codigo," | ").concat(t.nome)}}))})).finally((function(){return t.buscandoContas=!1}))}},computed:{preco:function(){return{decimal:",",thousands:".",prefix:"",suffix:"",precision:2,masked:!1}},inteiro:function(){return{decimal:",",thousands:".",prefix:"D+ ",suffix:"",precision:0,masked:!1}}}},d=(s("CVCh"),s("KHd+")),m=Object(d.a)(l,(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"page-title-box d-flex align-items-center justify-content-between"},[s("h4",{staticClass:"mb-0 font-size-18"},[t._v("Cadastro de Formas de Pagamento")]),t._v(" "),s("div",{staticClass:"page-title-right"},[s("a",{staticClass:"btn btn-outline-primary waves-effect waves-light",attrs:{href:"#modal-editar","data-toggle":"modal"},on:{click:function(a){return t.abrirModalEditar({vista:!1,compensa_automatico:!1,ativo:!0,entrada:!1})}}},[s("i",{staticClass:"bx bxs-plus-square font-size-16 align-middle mr-2"}),t._v(" Nova forma de pagamento\n                    ")])])])])]),t._v(" "),s("div",{staticClass:"row",staticStyle:{padding:"10px"}},[s("div",{staticClass:"col-sm-12 col-md-8"},[s("label",{staticStyle:{width:"90%"}},[t._v("Buscar por:\n                "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filtro.texto,expression:"filtro.texto"}],staticClass:"form-control form-control-sm",attrs:{autofocus:"",type:"text",placeholder:"Nome  / Descrição"},domProps:{value:t.filtro.texto},on:{input:[function(a){a.target.composing||t.$set(t.filtro,"texto",a.target.value)},t.debounceBusca]}})])]),t._v(" "),s("div",{staticClass:"col-sm-12 col-md-2"},[s("label",{staticStyle:{width:"90%"}},[t._v("Status:\n                "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filtro.ativo,expression:"filtro.ativo"}],staticClass:"form-control form-control-sm",on:{input:t.debounceBusca,change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filtro,"ativo",a.target.multiple?s:s[0])}}},[s("option",{domProps:{value:"TODOS"}},[t._v("Todos")]),t._v(" "),s("option",{domProps:{value:"true"}},[t._v("Ativos")]),t._v(" "),s("option",{domProps:{value:"false"}},[t._v("Inativos")])])])]),t._v(" "),s("div",{staticClass:"col-sm-12 col-md-2"},[s("label",{staticStyle:{width:"90%"}},[t._v("Filtrar:\n            "),s("button",{staticClass:"btn btn-outline-primary btn-sm btn-block",on:{click:function(a){return t.navegar(1)}}},[s("span",{staticClass:"bx bx-search-alt"})])])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table mb-0"},[t._m(0),t._v(" "),s("tbody",t._l(t.dados,(function(a){return s("tr",{key:a.id,class:{"font-weight-bold":1==a.nivel,"font-size-14":1==a.nivel}},[s("td",[t._v(t._s(a.id))]),t._v(" "),s("td",[t._v(t._s(a.nome))]),t._v(" "),s("td",[s("span",{staticClass:"badge",class:{"badge-success":a.ativo,"badge-dark":!a.ativo}},[t._v(t._s(a.ativo?"Ativo":"Inativo"))])]),t._v(" "),s("td",[s("span",{staticClass:"badge badge-info"},[t._v(t._s(a.vista?"À Vista":"À Prazo"))]),t._v(" "),a.vista?t._e():s("span",[t._v(" : Max "+t._s(a.parcelas_maximo)+" parc")])]),t._v(" "),s("td",[t._v(t._s(a.descricao))]),t._v(" "),s("td",[s("button",{staticClass:"btn btn-outline-success waves-effect waves-light",staticStyle:{padding:"3px 12px 3px 12px"},attrs:{disabled:1==a.nivel,title:"Editar","data-toggle":"modal","data-target":"#modal-editar","data-backdrop":"static"},on:{click:function(s){return t.abrirModalEditar(a)}}},[s("i",{staticClass:"mdi mdi-pencil d-block font-size-14"})]),t._v(" "),s("button",{staticClass:"btn btn-outline-danger waves-effect waves-light",staticStyle:{padding:"3px 12px 3px 12px"},attrs:{disabled:1==a.nivel,type:"button",title:"Desativar","data-toggle":"modal","data-target":"#modal-delete","data-backdrop":"static"},on:{click:function(s){return t.abrirModalEditar(a)}}},[s("i",{staticClass:"mdi mdi-trash-can d-block font-size-14"})])])])})),0)])])])])])]),t._v(" "),s("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"modal-delete",tabindex:"-1","aria-labelledby":"modal-delete-title","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-dialog-scrollable"},[s("div",{staticClass:"modal-content"},[t._m(1),t._v(" "),t.forma?s("div",{staticClass:"modal-body"},[t.sucessoDeletar?t._e():s("p",[t._v("Tem certeza que deseja desativar a forma de pagamento "),s("strong",[t._v(" "+t._s(t.forma.nome)+" ")]),t._v(" "),s("br"),t._v("\n                    "+t._s(t.forma.descricao)),s("br"),t._v("\n                    \n                    ?")]),t._v(" "),t.sucessoDeletar?s("div",{staticClass:"text-center"},[t._m(2),t._v(" "),s("p",{staticClass:"success text-center font-size-18"},[t._v(t._s(t.sucessoDeletar))])]):t._e(),t._v(" "),t.erroDeletar?s("mensagem-componente",{attrs:{titulo:"Erro!",erros:t.erroDeletar},on:{fechar:function(a){t.erroDeletar=null}}}):t._e()],1):s("div",{staticClass:"modal-body"}),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-danger",attrs:{type:"button",disabled:t.sucessoDeletar||!t.forma},on:{click:function(a){return a.preventDefault(),t.deletar()}}},[s("i",{staticClass:"mdi mdi-trash-can font-size-18"}),t._v(" Desativar ")]),t._v(" "),t._m(3)])])])]),t._v(" "),s("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"modal-editar",tabindex:"-1","aria-labelledby":"modal-editar-title","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-lg modal-dialog-scrollable"},[s("div",{staticClass:"modal-content"},[t._m(4),t._v(" "),t.forma?s("form",{staticClass:"modal-body"},[s("div",{staticClass:"row"},[s("label",{staticClass:"col-sm-3 col-form-label"},[t._v("Nome")]),t._v(" "),s("div",{staticClass:"col-sm-9"},[s("input-componente",{attrs:{validator:t.$v.forma.nome},on:{blur:t.$v.forma.nome.$touch},model:{value:t.forma.nome,callback:function(a){t.$set(t.forma,"nome",a)},expression:"forma.nome"}})],1),t._v(" "),s("label",{staticClass:"col-sm-3 col-form-label"},[t._v("Descrição")]),t._v(" "),s("div",{staticClass:"col-sm-9"},[s("input-componente",{attrs:{validator:t.$v.forma.descricao},on:{blur:t.$v.forma.descricao.$touch},model:{value:t.forma.descricao,callback:function(a){t.$set(t.forma,"descricao",a)},expression:"forma.descricao"}})],1),t._v(" "),s("label",{staticClass:"col-sm-3 col-form-label"},[t._v("Caixa de liquidação Automática")]),t._v(" "),s("div",{staticClass:"col-sm-9"},[s("container-componente",{attrs:{validator:t.$v.forma.caixa_id}},[s("vue-select",{staticStyle:{height:"calc(1.5em + 0.94rem - 6px)"},attrs:{placeholder:"Nenhum",options:t.contas,label:"label"},on:{search:t.buscarContasDebounce,input:function(a){t.forma.caixa_id=t.forma.caixa?t.forma.caixa.id:null},blur:function(a){t.$v.forma.caixa_id.$touch}},model:{value:t.forma.caixa,callback:function(a){t.$set(t.forma,"caixa",a)},expression:"forma.caixa"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("Nenhum item encontrado!")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.buscandoContas,expression:"buscandoContas"}],staticClass:"spinner"},[t._v("Buscando...")])])],1)],1),t._v(" "),s("label",{staticClass:"col-sm-3 col-form-label"},[t._v("Pagamento")]),t._v(" "),s("div",{staticClass:"col-sm-4"},[s("container-componente",{attrs:{validator:t.$v.forma.descricao}},[s("div",{staticClass:"custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.forma.vista,expression:"forma.vista"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"check-vista"},domProps:{checked:Array.isArray(t.forma.vista)?t._i(t.forma.vista,null)>-1:t.forma.vista},on:{blur:t.$v.forma.vista.$touch,change:function(a){var s=t.forma.vista,e=a.target,o=!!e.checked;if(Array.isArray(s)){var i=t._i(s,null);e.checked?i<0&&t.$set(t.forma,"vista",s.concat([null])):i>-1&&t.$set(t.forma,"vista",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.forma,"vista",o)}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"check-vista"}},[t._v("À Vista")])])])],1),t._v(" "),t.forma.vista?s("div",{staticClass:"col-sm-5"},[s("container-componente",{attrs:{validator:t.$v.forma.compensa_automatico}},[s("div",{staticClass:"custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.forma.compensa_automatico,expression:"forma.compensa_automatico"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"check-auto-compensa"},domProps:{checked:Array.isArray(t.forma.compensa_automatico)?t._i(t.forma.compensa_automatico,null)>-1:t.forma.compensa_automatico},on:{blur:t.$v.forma.compensa_automatico.$touch,change:function(a){var s=t.forma.compensa_automatico,e=a.target,o=!!e.checked;if(Array.isArray(s)){var i=t._i(s,null);e.checked?i<0&&t.$set(t.forma,"compensa_automatico",s.concat([null])):i>-1&&t.$set(t.forma,"compensa_automatico",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.forma,"compensa_automatico",o)}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"check-auto-compensa",title:"Compensa automaticamente a conta na data de vencimento"}},[t._v("Auto Compensação")])])])],1):t._e()]),t._v(" "),t.forma.vista?t._e():s("div",{staticClass:"row"},[s("label",{staticClass:"col-sm-3 col-form-label"},[t._v("Dias Primeira Parcela")]),t._v(" "),s("div",{staticClass:"col-sm-4"},[s("container-componente",{attrs:{validator:t.$v.forma.dias}},[s("money",t._b({staticClass:"form-control",on:{blur:t.$v.forma.dias.$touch},model:{value:t.forma.dias,callback:function(a){t.$set(t.forma,"dias",a)},expression:"forma.dias"}},"money",t.inteiro,!1))],1)],1),t._v(" "),s("small",{staticClass:"col-sm-5"}),t._v(" "),!1===t.forma.vista?s("label",{staticClass:"col-sm-3 col-form-label"},[t._v("Máximo de Parcelas")]):t._e(),t._v(" "),!1===t.forma.vista?s("div",{staticClass:"col-sm-3"},[s("input-componente",{attrs:{validator:t.$v.forma.parcelas_maximo},on:{blur:t.$v.forma.parcelas_maximo.$touch},model:{value:t.forma.parcelas_maximo,callback:function(a){t.$set(t.forma,"parcelas_maximo",a)},expression:"forma.parcelas_maximo"}})],1):t._e(),t._v(" "),!1===t.forma.vista?s("div",{staticClass:"col-sm-6"}):t._e()]),t._v(" "),t.forma.id?s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12 text-right"},[s("log-componente",{attrs:{index:t.forma.id,subject_type:"App\\Models\\Cliente\\FormaPagamento",subject_id:t.forma.id}})],1)]):t._e()]):s("div",{staticClass:"modal-body"}),t._v(" "),s("div",{staticClass:"modal-footer"},[s("div",{staticClass:"row"},[t.erroEditar?s("div",{staticClass:"col-md-12"},[s("mensagem-componente",{attrs:{titulo:"Erro!",erros:t.erroEditar},on:{fechar:function(a){t.erroEditar=null}}})],1):t._e(),t._v(" "),t.sucessoEditar?s("div",{staticClass:"col-md-12"},[s("mensagem-componente",{attrs:{sucesso:t.sucessoEditar},on:{fechar:function(a){t.sucessoEditar=null}}})],1):t._e(),t._v(" "),s("div",{staticClass:"col-md-12"},[t._m(5),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.sucessoEditar||!t.forma},on:{click:function(a){return a.preventDefault(),t.salvar()}}},[s("i",{staticClass:"mdi mdi-content-save font-size-18"}),t._v(" Salvar ")])])])])])])])])}),[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("tr",[s("th",[t._v("#")]),t._v(" "),s("th",[t._v("Nome")]),t._v(" "),s("th",[t._v("Ativo")]),t._v(" "),s("th",[t._v("Forma")]),t._v(" "),s("th",[t._v("Descrição")]),t._v(" "),s("th",[t._v("Ações")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title mt-0",attrs:{id:"modal-deleteTitle"}},[this._v("  Confirmação de Desativação Forma de Pagamento")]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"swal2-icon swal2-success swal2-icon-show",staticStyle:{display:"flex"}},[a("div",{staticClass:"swal2-success-circular-line-left",staticStyle:{"background-color":"rgb(255, 255, 255)"}}),this._v(" "),a("span",{staticClass:"swal2-success-line-tip"}),this._v(" "),a("span",{staticClass:"swal2-success-line-long"}),this._v(" "),a("div",{staticClass:"swal2-success-ring"}),this._v(" "),a("div",{staticClass:"swal2-success-fix",staticStyle:{"background-color":"rgb(255, 255, 255)"}}),this._v(" "),a("div",{staticClass:"swal2-success-circular-line-right",staticStyle:{"background-color":"rgb(255, 255, 255)"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[a("i",{staticClass:"mdi mdi-close-circle font-size-18"}),this._v(" Fechar")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title mt-0",attrs:{id:"modal-editarTitle"}},[this._v(" Cadastro de Forma de Pagamento")]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[a("i",{staticClass:"mdi mdi-close-circle font-size-18"}),this._v(" Fechar")])}],!1,null,"09f00dce",null);a.default=m.exports},Ygyk:function(t,a,s){(t.exports=s("I1BE")(!1)).push([t.i,"tr[data-v-09f00dce]:hover{background-color:#eff2f7}",""])},uYQq:function(t,a,s){var e=s("Ygyk");"string"==typeof e&&(e=[[t.i,e,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(e,o);e.locals&&(t.exports=e.locals)}}]);
//# sourceMappingURL=26.js.map