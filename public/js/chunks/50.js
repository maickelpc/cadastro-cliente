(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{"PCv/":function(s,t,e){"use strict";e.r(t);var a=e("ta7f");function i(s,t){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable}))),e.push.apply(e,a)}return e}function o(s){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?i(Object(e),!0).forEach((function(t){r(s,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(t){Object.defineProperty(s,t,Object.getOwnPropertyDescriptor(e,t))}))}return s}function r(s,t,e){return t in s?Object.defineProperty(s,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[t]=e,s}var l=new(e("C7En").a),n={data:function(){return{form:{id:null,name:"",guard_name:"",description:""},sucesso:null,erros:null,errosTitulo:"",errosPermissoes:null,sucessoPermissoes:null,permissoes:[],permissaoModal:null,permissoesBusca:[],timer:null,buscandoPermissao:!0}},validations:{form:{name:{required:a.required,maxLength:Object(a.maxLength)(50)},guard_name:{required:a.required,maxLength:Object(a.maxLength)(50)},description:{maxLength:Object(a.maxLength)(200)}}},mounted:function(){this.$route.params.id&&this.buscarObjeto(this.$route.params.id)},methods:{submit:function(s){var t=this;if(this.$v.$touch(),this.erros=null,this.sucesso=null,this.errosTitulo="",this.$v.$invalid)return this.errosTitulo="Preencha o formulário corretamente, alguns campos estão com erros!",this.erros=this.$v.form,!1;var e=o({},this.form);(e.id?l.atualizarGrupo(e):l.criarGrupo(e)).then((function(s){var e=!t.form.id;if(t.form=s.data,t.sucesso="Registro salvo com sucesso!",e){var a=String(t.$route.path).lastIndexOf("/"),i=String(t.$route.path).slice(0,a);i+="/"+t.form.id,t.$router.push(i),t.buscarObjeto(t.form.id)}})).catch((function(s){return t.erros=s}))},buscarObjeto:function(s){var t=this;l.buscarGrupo(s).then((function(s){t.form=s.data,t.permissoes=s.data.permissions})).catch((function(s){return t.erros=s}))},abrirModalDesvincular:function(s){this.sucessoPermissoes=null,this.erroPermissoes=null,this.permissaoModal=o({},s)},desvincularPermissao:function(){var s=this;this.sucessoPermissoes=null,this.errosPermissoes=null,l.desvincularPermissao(this.form.id,this.permissaoModal.id).then((function(t){s.permissoes=s.permissoes.filter((function(t){return t.id!=s.permissaoModal.id})),s.sucessoPermissoes="Permissão desvinculada com sucesso!"})).catch((function(t){return s.errosPermissoes=t}))},abrirModalVincular:function(){this.sucessoPermissoes=null,this.erroPermissoes=null,this.permissaoModal=null,this.buscarPermissoes()},vincularPermissao:function(){var s=this;this.sucessoPermissoes=null,this.errosPermissoes=null,l.vincularPermissao(this.form.id,this.permissaoModal.id).then((function(t){s.permissoes.push(o({},t.data)),s.sucessoPermissoes="Permissão: ".concat(t.data.name," vinculada com sucesso!")})).catch((function(t){return s.errosPermissoes=t}))},buscarPermissoesDebounce:function(s,t){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.buscarPermissoes(s,t)}),700)},buscarPermissoes:function(s,t){var e=this;this.permissoesBusca=[],this.buscandoPermissao=!0,l.listarPermissoes({texto:s,per_page:50,guard_name:this.form.guard_name,grupo_id:this.form.id}).then((function(s){return e.permissoesBusca=s.data.data})).catch((function(s){return e.errosPermissoes=s})).finally((function(){return e.buscandoPermissao=!1}))}}},c=e("KHd+"),d=Object(c.a)(n,(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("form",{staticClass:"row",on:{submit:function(t){return t.preventDefault(),s.submit()}}},[e("div",{staticClass:"col-lg-6"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[s._m(0),s._v(" "),e("div",{staticClass:"row"},[e("label",{staticClass:"col-sm-3 col-form-label"},[s._v("Id")]),s._v(" "),e("div",{staticClass:"col-sm-9"},[e("input-componente",{attrs:{disabled:!0},model:{value:s.form.id,callback:function(t){s.$set(s.form,"id",t)},expression:"form.id"}})],1),s._v(" "),e("label",{staticClass:"col-sm-3 col-form-label"},[s._v("Nome")]),s._v(" "),e("div",{staticClass:"col-sm-9"},[e("input-componente",{attrs:{validator:s.$v.form.name},on:{blur:s.$v.form.name.$touch},model:{value:s.form.name,callback:function(t){s.$set(s.form,"name",t)},expression:"form.name"}})],1),s._v(" "),e("label",{staticClass:"col-sm-3 col-form-label"},[s._v("Guarda")]),s._v(" "),e("div",{staticClass:"col-sm-9"},[e("input-componente",{attrs:{placeholder:"web / api",validator:s.$v.form.guard_name},on:{blur:s.$v.form.guard_name.$touch},model:{value:s.form.guard_name,callback:function(t){s.$set(s.form,"guard_name",t)},expression:"form.guard_name"}})],1),s._v(" "),e("label",{staticClass:"col-sm-3 col-form-label"},[s._v("Descrição")]),s._v(" "),e("div",{staticClass:"col-sm-9"},[e("input-componente",{attrs:{validator:s.$v.form.description},on:{blur:s.$v.form.description.$touch},model:{value:s.form.description,callback:function(t){s.$set(s.form,"description",t)},expression:"form.description"}})],1)]),s._v(" "),e("div",{staticClass:"row"},[s.erros||s.sucesso?e("div",{staticClass:"col-md-12 text-center"},[s.erros?e("mensagem-componente",{attrs:{titulo:s.errosTitulo,erros:s.erros},on:{fechar:function(t){s.erros=null}}}):s._e(),s._v(" "),s.sucesso?e("mensagem-componente",{attrs:{sucesso:s.sucesso},on:{fechar:function(t){s.sucesso=null}}}):s._e()],1):s._e(),s._v(" "),e("div",{staticClass:"col-md-12 button-items text-center"},[e("router-link",{staticClass:"btn btn-warning waves-effect waves-light w-sm",attrs:{title:"Voltar",to:{name:"gruposLista"}}},[e("i",{staticClass:"bx bx-arrow-back d-block font-size-16"}),s._v(" Voltar\n                        ")]),s._v(" "),s._m(1)],1)]),s._v(" "),e("div",{staticClass:"row"},[s.form.id?e("div",{staticClass:"col-md-12 text-right"},[e("log-componente",{attrs:{index:s.form.id,subject_type:"App\\Models\\Spatie\\Grupo",subject_id:s.form.id}})],1):s._e()])])])]),s._v(" "),e("div",{staticClass:"col-lg-6"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"page-title-box d-flex align-items-center justify-content-between"},[e("h4",{staticClass:"mb-0 font-size-18"},[s._v("Permissões vinculadas")]),s._v(" "),e("div",{staticClass:"page-title-right"},[e("button",{staticClass:"btn btn-outline-primary waves-effect waves-light",attrs:{type:"button","data-toggle":"modal",disabled:!s.form.id,"data-target":"#modal-adicionar","data-backdrop":"static"},on:{click:s.abrirModalVincular}},[e("i",{staticClass:"bx bxs-plus-square font-size-16 align-middle mr-2"}),s._v(" Adicionar\n                                ")])])])])]),s._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table mb-0"},[s._m(2),s._v(" "),e("tbody",s._l(s.permissoes,(function(t){return e("tr",{key:t.id},[e("td",[s._v(s._s(t.name)+" ")]),s._v(" "),e("td",[s._v(s._s(t.description))]),s._v(" "),e("td",[e("button",{staticClass:"btn btn-outline-danger waves-effect waves-light",staticStyle:{padding:"3px 12px 3px 12px"},attrs:{type:"button",title:"Desvincular","data-toggle":"modal","data-target":"#modal-delete","data-backdrop":"static"},on:{click:function(e){return s.abrirModalDesvincular(t)}}},[e("i",{staticClass:"mdi mdi-trash-can d-block font-size-12"})])])])})),0)])])])])])])]),s._v(" "),e("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"modal-delete",tabindex:"-1","aria-labelledby":"modal-delete-title","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-scrollable"},[e("div",{staticClass:"modal-content"},[s._m(3),s._v(" "),s.permissaoModal?e("div",{staticClass:"modal-body"},[s.sucessoPermissoes?s._e():e("p",[s._v("Tem certeza que deseja descinvular a permissão "),e("strong",[s._v(s._s(s.permissaoModal.name))]),s._v("  deste grupo de usuários?")]),s._v(" "),s.sucessoPermissoes?e("div",{staticClass:"text-center"},[s._m(4),s._v(" "),e("p",{staticClass:"success text-center font-size-18"},[s._v(s._s(s.sucessoPermissoes))])]):s._e(),s._v(" "),s.errosPermissoes?e("mensagem-componente",{attrs:{titulo:"Erro!",erros:s.errosPermissoes},on:{fechar:function(t){s.errosPermissoes=null}}}):s._e()],1):e("div",{staticClass:"modal-body"}),s._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-danger",attrs:{type:"button",disabled:s.sucessoPermissoes||!s.permissaoModal},on:{click:function(t){return t.preventDefault(),s.desvincularPermissao()}}},[e("i",{staticClass:"mdi mdi-trash-can font-size-18"}),s._v(" Sim ")]),s._v(" "),s._m(5)])])])]),s._v(" "),e("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"modal-adicionar",tabindex:"-1","aria-labelledby":"modal-adicionar-title","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-scrollable"},[e("div",{staticClass:"modal-content"},[s._m(6),s._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[s._v("Permissão")]),s._v(" "),e("vue-select",{staticStyle:{height:"calc(1.5em + 0.94rem - 6px)"},attrs:{placeholder:"Comece a digitar para buscar",options:s.permissoesBusca,disabled:s.sucessoPermissoes,label:"name"},on:{search:s.buscarPermissoesDebounce},scopedSlots:s._u([{key:"option",fn:function(t){return[s._v("\n                                        "+s._s(t.name)+" | "+s._s(t.guard_name)+"\n                                    ")]}}]),model:{value:s.permissaoModal,callback:function(t){s.permissaoModal=t},expression:"permissaoModal"}},[s._v(" "),e("div",{attrs:{slot:"no-options"},slot:"no-options"},[s._v("Nenhum item encontrado!")]),s._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:s.buscandoPermissao,expression:"buscandoPermissao"}],staticClass:"spinner"},[s._v("Buscando...")])])],1)]),s._v(" "),s.permissaoModal&&s.permissaoModal.id?e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[s._v("Guarda")]),s._v(" "),e("input",{staticClass:"form-control",attrs:{type:"text",disabled:!0},domProps:{value:s.permissaoModal.guard_name}})])]):s._e(),s._v(" "),s.permissaoModal&&s.permissaoModal.id?e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[s._v("Descrição")]),s._v(" "),e("input",{staticClass:"form-control",attrs:{type:"text",disabled:!0},domProps:{value:s.permissaoModal.description}})])]):e("div",{staticClass:"col-md-12",staticStyle:{height:"100px"}})]),s._v(" "),s.errosPermissoes||s.sucessoPermissoes?e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12 text-center"},[s.errosPermissoes?e("mensagem-componente",{attrs:{erros:s.errosPermissoes},on:{fechar:function(t){s.errosPermissoes=null}}}):s._e(),s._v(" "),s.sucessoPermissoes?e("mensagem-componente",{attrs:{sucesso:s.sucessoPermissoes},on:{fechar:function(t){s.sucessoPermissoes=null}}}):s._e()],1)]):s._e()]),s._v(" "),e("div",{staticClass:"modal-footer"},[s.sucessoPermissoes?e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),s.abrirModalVincular()}}},[e("i",{staticClass:"bx bxs-plus-square font-size-18"}),s._v(" Vincular Outra ")]):s._e(),s._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:s.sucessoPermissoes||!s.permissaoModal},on:{click:function(t){return t.preventDefault(),s.vincularPermissao()}}},[e("i",{staticClass:"bx bxs-save font-size-18"}),s._v(" Vincular ")]),s._v(" "),s._m(7)])])])])])}),[function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("h3",[this._v("Cadastro de Grupo de Usuário")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("button",{staticClass:"btn btn-primary waves-effect waves-light w-sm",attrs:{type:"submit",title:"salvar"}},[t("i",{staticClass:"bx bxs-save d-block font-size-16"}),this._v(" Salvar\n                        ")])},function(){var s=this.$createElement,t=this._self._c||s;return t("thead",[t("tr",[t("th",[this._v("Name")]),this._v(" "),t("th",[this._v("Descrição")]),this._v(" "),t("th",[this._v("#")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title mt-0",attrs:{id:"modal-deleteTitle"}},[this._v("  Confirmação de Exclusão de Registro")]),this._v(" "),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"swal2-icon swal2-success swal2-icon-show",staticStyle:{display:"flex"}},[t("div",{staticClass:"swal2-success-circular-line-left",staticStyle:{"background-color":"rgb(255, 255, 255)"}}),this._v(" "),t("span",{staticClass:"swal2-success-line-tip"}),this._v(" "),t("span",{staticClass:"swal2-success-line-long"}),this._v(" "),t("div",{staticClass:"swal2-success-ring"}),this._v(" "),t("div",{staticClass:"swal2-success-fix",staticStyle:{"background-color":"rgb(255, 255, 255)"}}),this._v(" "),t("div",{staticClass:"swal2-success-circular-line-right",staticStyle:{"background-color":"rgb(255, 255, 255)"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t("i",{staticClass:"mdi mdi-close-thick font-size-18"}),this._v(" Voltar")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title mt-0",attrs:{id:"modal-adicionarTitle"}},[this._v("  Selecione uma nova permissão")]),this._v(" "),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t("i",{staticClass:"bx bx-window-close font-size-18"}),this._v(" Voltar")])}],!1,null,"af5f644e",null);t.default=d.exports}}]);
//# sourceMappingURL=50.js.map