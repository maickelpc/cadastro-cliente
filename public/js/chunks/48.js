(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{"9pM0":function(e,o,t){"use strict";t.r(o);var a=t("ta7f"),s=t("gR0X"),r=(t("wd/R"),t("c3KP"));function i(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);o&&(a=a.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,a)}return t}function n(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}var l=new s.l,c=new s.j,m=new s.k,d={components:{container:r.a},data:function(){return{form:{id:null,nome:"",empresa_id:null,ativo:!0,cidade_id:"",endereco_tipo:"",logradouro:"",numero:"",complemento:"",bairro:"",cep:"",fone:"",email:""},sucesso:null,erros:null,errosTitulo:"",timer:null,cidades:[],cidade:{},buscandoCidade:!1,empresa:null,buscandoEmpresas:!1,empresas:[]}},validations:{form:{nome:{required:a.required,maxLength:Object(a.maxLength)(50)},ativo:{required:a.required},cidade_id:{},endereco_tipo:{maxLength:Object(a.maxLength)(20)},logradouro:{maxLength:Object(a.maxLength)(100)},numero:{maxLength:Object(a.maxLength)(10)},complemento:{maxLength:Object(a.maxLength)(100)},bairro:{maxLength:Object(a.maxLength)(100)},cep:{maxLength:Object(a.maxLength)(10)},fone:{maxLength:Object(a.maxLength)(20)},email:{email:a.email,maxLength:Object(a.maxLength)(150)},empresa_id:{required:a.required}}},mounted:function(){var e=this;this.buscarEmpresas(),this.$route.params.id&&setTimeout((function(){e.buscarObjeto(e.$route.params.id)}),200)},methods:{submit:function(){var e=this;if(this.erros=null,this.sucesso=null,this.errosTitulo="",this.$v.form.$touch(),this.$v.form.$invalid)return this.errosTitulo="Preencha o formulário corretamente, alguns campos estão com erros!",this.erros=this.$v.form,!1;var o=function(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?i(Object(t),!0).forEach((function(o){n(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}({},this.form);(o.id?l.atualizar(o):l.criar(o)).then((function(o){var t=!e.form.id;if(e.form=o.data,e.sucesso="Registro salvo com sucesso!",t){var a=String(e.$route.path).lastIndexOf("/"),s=String(e.$route.path).slice(0,a);s+="/"+e.form.id,e.$router.push(s),e.buscarObjeto(e.form.id)}})).catch((function(o){return e.erros=o}))},buscarObjeto:function(e){var o=this;l.buscar(e).then((function(e){o.form=e.data,o.roles=e.data.roles,e.data.cidade&&(o.cidades.push({id:e.data.cidade.id,nome:e.data.cidade.nome}),o.cidade=o.cidades[0]),o.empresa=o.empresas[o.empresas.map((function(e){return e.id})).indexOf(e.data.empresa_id)]})).catch((function(e){return o.erros=e}))},buscarCep:function(){var e=this;m.buscarEnderecoPorCep(this.form.cep).then((function(o){console.log(o),o.data.logradouro?(e.form.logradouro=o.data.logradouro.substr(o.data.logradouro.indexOf(" ")+1),e.form.endereco_tipo=o.data.logradouro.substr(0,o.data.logradouro.indexOf(" "))):(e.form.logradouro="",e.form.endereco_tipo=""),e.form.bairro=o.data.bairro,m.buscarCidadePorIbge(o.data.ibge).then((function(o){console.log(o.data),e.cidade={id:o.data.id,nome:o.data.nome,sigla:o.data.estado.sigla},e.form.cidade_id=e.cidade.id,e.cidades=[]})).catch((function(e){console.log(e)}))})).catch((function(e){}))},buscarCidadesDebounce:function(e,o){var t=this;clearTimeout(this.timer),this.timer=setTimeout((function(){t.buscarCidades(e,o)}),700)},buscarCidades:function(e,o){var t=this;m.listarCidadesBusca({texto:e}).then((function(e){return t.cidades=e.data.data})).catch((function(e){return console.log(e)}))},buscarEmpresasDebounce:function(e,o){var t=this;clearTimeout(this.timer),this.timer=setTimeout((function(){t.buscarEmpresas(e,o)}),700)},buscarEmpresas:function(e,o){var t=this;this.buscandoEmpresas=!0,c.listar({texto:e,per_page:50,id:this.form.id}).then((function(e){return t.empresas=e.data.data})).catch((function(e){return console.log(e)})).finally((function(){return t.buscandoEmpresas=!1}))}}},u=t("KHd+"),v=Object(u.a)(d,(function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("form",{staticClass:"row",on:{submit:function(o){return o.preventDefault(),e.submit()}}},[t("div",{staticClass:"col-lg-12"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("h3",[e._v("Cadastro de Empresas "),e.form.id?t("span",[e._v(": "+e._s(e.form.apelido))]):e._e()])])]),e._v(" "),t("hr"),e._v(" "),t("div",{staticClass:"row"},[e._m(0),e._v(" "),t("div",{staticClass:"col-md-9"},[t("div",{staticClass:"tab-content text-muted mt-4 mt-md-0",attrs:{id:"v-pills-tabContent"}},[t("div",{staticClass:"tab-pane fade active show",attrs:{id:"v-pills-home",role:"tabpanel","aria-labelledby":"v-pills-home-tab"}},[e._m(1),e._v(" "),t("hr"),e._v(" "),t("div",{staticClass:"row"},[t("label",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],staticClass:"col-sm-3 col-form-label"},[e._v("Id")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],staticClass:"col-sm-9"},[t("input-componente",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(o){e.$set(e.form,"id",o)},expression:"form.id"}})],1),e._v(" "),t("label",{staticClass:"col-sm-3 col-form-label"},[e._v("Nome")]),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("input-componente",{attrs:{validator:e.$v.form.nome},on:{blur:e.$v.form.nome.$touch},model:{value:e.form.nome,callback:function(o){e.$set(e.form,"nome",o)},expression:"form.nome"}})],1),e._v(" "),t("label",{staticClass:"col-sm-3 col-form-label"},[e._v("Empresa:")]),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("container-componente",{attrs:{validator:e.$v.form.empresa_id}},[t("vue-select",{staticStyle:{height:"calc(1.5em + 0.94rem - 6px)"},attrs:{placeholder:"Comece a digitar para buscar",options:e.empresas,label:"apelido"},on:{input:function(o){e.$v.form.empresa_id.$touch,e.form.empresa_id=e.empresa.id},search:e.buscarEmpresasDebounce},scopedSlots:e._u([{key:"option",fn:function(o){return[e._v("\n                                                        "+e._s(o.apelido)+" / "+e._s(o.razao_social)+"\n                                                    ")]}}]),model:{value:e.empresa,callback:function(o){e.empresa=o},expression:"empresa"}},[e._v(" "),t("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Nenhum item encontrado!")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.buscandoEmpresas,expression:"buscandoEmpresas"}],staticClass:"spinner"},[e._v("Buscando...")])])],1)],1),e._v(" "),t("label",{staticClass:"col-sm-3 col-form-label"},[e._v("Cep:")]),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("input-componente",{attrs:{mask:["#####-###"],validator:e.$v.form.cep},on:{blur:function(o){e.$v.form.cep.$touch,e.buscarCep()}},model:{value:e.form.cep,callback:function(o){e.$set(e.form,"cep",o)},expression:"form.cep"}})],1),e._v(" "),t("label",{staticClass:"col-sm-3 col-form-label"},[e._v("Tipo:")]),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("container-componente",{attrs:{validator:e.$v.form.endereco_tipo}},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.endereco_tipo,expression:"form.endereco_tipo"}],staticClass:"form-control",on:{change:function(o){var t=Array.prototype.filter.call(o.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.form,"endereco_tipo",o.target.multiple?t:t[0])}}},[t("option",{domProps:{value:"Alameda"}},[e._v("Alameda")]),e._v(" "),t("option",{domProps:{value:"Avenida"}},[e._v("Avenida")]),e._v(" "),t("option",{domProps:{value:"Estrada"}},[e._v("Estrada")]),e._v(" "),t("option",{domProps:{value:"Morro"}},[e._v("Morro")]),e._v(" "),t("option",{domProps:{value:"Parque"}},[e._v("Parque")]),e._v(" "),t("option",{domProps:{value:"Pátio"}},[e._v("Pátio")]),e._v(" "),t("option",{domProps:{value:"Praça"}},[e._v("Praça")]),e._v(" "),t("option",{domProps:{value:"Rodovia"}},[e._v("Rodovia")]),e._v(" "),t("option",{domProps:{value:"Travessa"}},[e._v("Travessa")]),e._v(" "),t("option",{domProps:{value:"Rua"}},[e._v("Rua")])])])],1),e._v(" "),t("label",{staticClass:"col-sm-3 col-form-label"},[e._v("Logradouro:")]),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("input-componente",{attrs:{validator:e.$v.form.logradouro},on:{blur:e.$v.form.logradouro.$touch},model:{value:e.form.logradouro,callback:function(o){e.$set(e.form,"logradouro",o)},expression:"form.logradouro"}})],1),e._v(" "),t("label",{staticClass:"col-sm-3 col-form-label"},[e._v("Número:")]),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("input-componente",{attrs:{validator:e.$v.form.numero},on:{blur:e.$v.form.numero.$touch},model:{value:e.form.numero,callback:function(o){e.$set(e.form,"numero",o)},expression:"form.numero"}})],1),e._v(" "),t("label",{staticClass:"col-sm-3 col-form-label"},[e._v("Bairro:")]),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("input-componente",{attrs:{validator:e.$v.form.bairro},on:{blur:e.$v.form.bairro.$touch},model:{value:e.form.bairro,callback:function(o){e.$set(e.form,"bairro",o)},expression:"form.bairro"}})],1),e._v(" "),t("label",{staticClass:"col-sm-3 col-form-label"},[e._v("Cidade:")]),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("container-componente",{attrs:{validator:e.$v.form.cidade_id}},[t("vue-select",{staticStyle:{height:"calc(1.5em + 0.94rem - 6px)"},attrs:{placeholder:"Comece a digitar para buscar",options:e.cidades,label:"nome"},on:{input:function(o){e.form.cidade_id=e.cidade.id},blur:e.$v.form.cidade_id.$touch,search:e.buscarCidadesDebounce},scopedSlots:e._u([{key:"option",fn:function(o){return[e._v("\n                                                        "+e._s(o.nome)+" / "+e._s(o.sigla)+"\n                                                    ")]}}]),model:{value:e.cidade,callback:function(o){e.cidade=o},expression:"cidade"}},[e._v(" "),t("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Nenhum item encontrado!")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.buscandoCidade,expression:"buscandoCidade"}],staticClass:"spinner"},[e._v("Buscando...")])])],1)],1),e._v(" "),t("label",{staticClass:"col-sm-3 col-form-label"},[e._v("Complemento:")]),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("input-componente",{attrs:{validator:e.$v.form.complemento},on:{blur:e.$v.form.complemento.$touch},model:{value:e.form.complemento,callback:function(o){e.$set(e.form,"complemento",o)},expression:"form.complemento"}})],1),e._v(" "),t("label",{staticClass:"col-sm-3 col-form-label"},[e._v("Email")]),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("input-componente",{attrs:{autofocus:"true",validator:e.$v.form.email},on:{blur:e.$v.form.email.$touch},model:{value:e.form.email,callback:function(o){e.$set(e.form,"email",o)},expression:"form.email"}})],1),e._v(" "),t("label",{staticClass:"col-sm-3 col-form-label"},[e._v("Telefone")]),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("input-componente",{attrs:{mask:["(##) ####-####","(##) #####-####"],validator:e.$v.form.fone},on:{blur:e.$v.form.fone.$touch},model:{value:e.form.fone,callback:function(o){e.$set(e.form,"fone",o)},expression:"form.fone"}})],1),e._v(" "),t("label",{staticClass:"col-sm-3 col-form-label"},[e._v("Ativo")]),e._v(" "),t("div",{staticClass:"col-sm-5"},[t("div",{staticClass:"custom-control custom-checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.ativo,expression:"form.ativo"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customCheckAtivo"},domProps:{checked:Array.isArray(e.form.ativo)?e._i(e.form.ativo,null)>-1:e.form.ativo},on:{change:function(o){var t=e.form.ativo,a=o.target,s=!!a.checked;if(Array.isArray(t)){var r=e._i(t,null);a.checked?r<0&&e.$set(e.form,"ativo",t.concat([null])):r>-1&&e.$set(e.form,"ativo",t.slice(0,r).concat(t.slice(r+1)))}else e.$set(e.form,"ativo",s)}}}),e._v(" "),t("label",{staticClass:"custom-control-label",attrs:{for:"customCheckAtivo"}},[e._v("Ativa ("+e._s(e.form.ativo?"Sim":"Não")+")")])])])])])])])]),e._v(" "),t("div",{staticClass:"row"},[e.erros||e.sucesso?t("div",{staticClass:"col-md-12 text-center"},[e.erros?t("mensagem-componente",{attrs:{titulo:e.errosTitulo,erros:e.erros},on:{fechar:function(o){e.erros=null}}}):e._e(),e._v(" "),e.sucesso?t("mensagem-componente",{attrs:{sucesso:e.sucesso},on:{fechar:function(o){e.sucesso=null}}}):e._e()],1):e._e(),e._v(" "),t("div",{staticClass:"col-md-12 button-items text-center"},[t("router-link",{staticClass:"btn btn-warning waves-effect waves-light w-sm",attrs:{title:"Voltar",to:{name:"estoquesLista"}}},[t("i",{staticClass:"bx bx-arrow-back d-block font-size-16"}),e._v(" Voltar\n                        ")]),e._v(" "),e._m(2)],1)]),e._v(" "),t("div",{staticClass:"row"},[e.form.id?t("div",{staticClass:"col-md-12 text-right"},[t("log-componente",{attrs:{index:e.form.id,subject_type:"App\\Models\\Cliente\\Estoque",subject_id:e.form.id}})],1):e._e()])])])])])}),[function(){var e=this.$createElement,o=this._self._c||e;return o("div",{staticClass:"col-md-3"},[o("div",{staticClass:"nav flex-column nav-pills",attrs:{id:"v-pills-tab",role:"tablist","aria-orientation":"vertical"}},[o("a",{staticClass:"nav-link mb-2 active",attrs:{id:"v-pills-home-tab","data-toggle":"pill",href:"#v-pills-home",role:"tab","aria-controls":"v-pills-home","aria-selected":"false"}},[this._v("Cadastro")])])])},function(){var e=this.$createElement,o=this._self._c||e;return o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-12"},[o("h4",[this._v("Dados Cadastrais")])])])},function(){var e=this.$createElement,o=this._self._c||e;return o("button",{staticClass:"btn btn-primary waves-effect waves-light w-sm",attrs:{type:"submit",title:"salvar"}},[o("i",{staticClass:"bx bxs-save d-block font-size-16"}),this._v(" Salvar\n                        ")])}],!1,null,"6c808754",null);o.default=v.exports}}]);
//# sourceMappingURL=48.js.map